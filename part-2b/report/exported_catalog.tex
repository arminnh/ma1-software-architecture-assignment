%%% element catalog, generated on Sun May 07 17:02:07 CEST 2017

%%%%
%% The following is a minimal header that allows you to compile a 'standalone' version of the catalog.
%% Uncomment these lines and dont forget to uncomment the \end{document} at the bottom.
%%%%
%% START MINIMAL HEADER
%\documentclass[a4paper,10pt]{report}
%% this package is not strictly needed
%\usepackage[top=2cm,bottom=2cm,left=2cm,right=2cm]{geometry}
%% the following packages are necessary
%\usepackage{enumitem}
%\usepackage{tikz}
%\usepackage{nameref}
%\usepackage{hyperref}
%
%\begin{document}
%% END MINIMAL HEADER


% EXPORT CMDS
% \texttt layout modifications

\newcommand*\vpejustify{%
	\fontdimen2\font=0.4em%
	\fontdimen3\font=0.8em%
	\fontdimen4\font=0.1em%
	\fontdimen7\font=1.0em%
	\hyphenchar\font=`\-\relax%
}
\newcommand{\vpett}[1]{\vpejustify{\texttt{#1}}}

% item labels
\makeatletter
\def\vpeitemlabel#1#2{\begingroup
	#2%
	\def\@currentlabel{#2}%
	\phantomsection\label{#1}\endgroup
}
\makeatother

% vpe operation
\newcommand{\vpeoperation}[1]{#1}

% vpe data type
\newcommand{\vpedatatype}[2]{\vpeitemlabel{#1}{\textbf{\textsf{#2}}}}

% vpe exception
\newcommand{\vpeexception}[2]{\vpeitemlabel{#1}{\textsl{#2}}}



\newcommand{\iconcomponent}{%
	\begin{tikzpicture}[scale=0.3,thin,baseline=-0.5ex]
	\draw (0,0) rectangle (0.4, 0.6);
	\draw [fill=white] (-0.1,0.40) rectangle +(0.25, 0.1);
	\draw [fill=white] (-0.1,0.22) rectangle +(0.25, 0.1);	
	\end{tikzpicture}%
}
\newcommand{\iconprovided}{%
	\begin{tikzpicture}[scale=0.25,thin,baseline=-0.5ex]
	\draw (0.60,0.25) circle [radius=0.25];
	\draw (0, 0.25) -- (0.35, 0.25);
	\end{tikzpicture}%
}
\newcommand{\iconrequired}{%
	\begin{tikzpicture}[scale=0.25,thin,baseline=-0.5ex]
	\draw (0.60,0) arc (270:90:0.25);
	\draw (0, 0.25) -- (0.35, 0.25);
	\end{tikzpicture}%
}
%  END EXPORT CMDS

\chapter{Catalog}
% COMPONENTS
\section{Components}\label{sec:components}
\subsection{AccessRightsManager}\label{comp:OnlineServiceOnlineServiceAccessRightsManager}
	\begin{description}[noitemsep,nolistsep]
		\item[Responsibility:]~Responsible for all functionality related to access rights to pluggable devices.
E.g. retrieving the access rights a customer organisation has for a device,
updating access rights for customer organisations, etc.
		\item[Super-components:]~None
		\item[Sub-components:]~None
		\item[Provided interfaces:]~\iconprovided{}~\vpett{\nameref{int:OnlineServiceOnlineServiceAccessRightsManagerAccessRightsMgmt}}
		\item[Required interfaces:]~\iconrequired{}~\vpett{\nameref{int:DeviceDatabaseDeviceDBDBAccessRightsMgmt}}		
	\end{description}
\subsection{ApplicationClient}\label{comp:ApplicationClient}
	\begin{description}[noitemsep,nolistsep]
		\item[Responsibility:]~Represents the client for applications. This is their external front end.
		\item[Super-components:]~None
		\item[Sub-components:]~None
		\item[Provided interfaces:]~None
		\item[Required interfaces:]~\iconrequired{}~\vpett{\nameref{int:OnlineServiceOnlineServiceApplicationManagerApplicationManagementLogicAppDeviceData}}, \iconrequired{}~\vpett{\nameref{int:OnlineServiceOnlineServiceApplicationManagerApplicationManagementLogicDeviceCommands}}		
	\end{description}
\subsection{ApplicationContainer}\label{comp:OnlineServiceOnlineServiceApplicationManagerApplicationContainer}
	\begin{description}[noitemsep,nolistsep]
		\item[Responsibility:]~This component contains a sandbox environment for an application instance to execute in. The container itself can detect when applications crash. In that case, the container tries to restart the application up to 3 times. If the application continues to crash, it is suspended and the ContainerMonitor is notified.
		\item[Super-components:]~\iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceApplicationManager}}
		\item[Sub-components:]~None
		\item[Provided interfaces:]~\iconprovided{}~\vpett{\nameref{int:OnlineServiceOnlineServiceApplicationManagerApplicationContainerAppInstanceMgmt}}, \iconprovided{}~\vpett{\nameref{int:OnlineServiceOnlineServiceApplicationManagerApplicationContainerAppMessages}}, \iconprovided{}~\vpett{\nameref{int:OnlineServiceOnlineServiceApplicationManagerApplicationContainerAppMonitoring}}
		\item[Required interfaces:]~\iconrequired{}~\vpett{\nameref{int:OnlineServiceOnlineServiceApplicationManagerApplicationManagementLogicAppDeviceData}}, \iconrequired{}~\vpett{\nameref{int:OnlineServiceOnlineServiceApplicationManagerApplicationContainerAppMessages}}, \iconrequired{}~\vpett{\nameref{int:OnlineServiceOnlineServiceApplicationManagerApplicationContainerMonitorAppStatus}}, \iconrequired{}~\vpett{\nameref{int:OnlineServiceOnlineServiceApplicationManagerDeviceDataConverterDataConversion}}, \iconrequired{}~\vpett{\nameref{int:OnlineServiceOnlineServiceApplicationManagerApplicationManagementLogicDeviceCommands}}		
	\end{description}
\subsection{ApplicationContainerManager}\label{comp:OnlineServiceOnlineServiceApplicationManagerApplicationContainerManager}
	\begin{description}[noitemsep,nolistsep]
		\item[Responsibility:]~Responsible for management of ApplicationContainers. E.g. creation, suspending containers, forwarding data to containers, etc. All communication that is destined to ApplicationContainers goes through here first, since the \vpett{\nameref{comp:OnlineServiceOnlineServiceApplicationManagerApplicationContainerManager}} knows where exactly ApplicationContainers are deployed.
		\item[Super-components:]~\iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceApplicationManager}}
		\item[Sub-components:]~None
		\item[Provided interfaces:]~\iconprovided{}~\vpett{\nameref{int:OnlineServiceOnlineServiceApplicationManagerApplicationManagementLogicAppDeviceData}}, \iconprovided{}~\vpett{\nameref{int:OnlineServiceOnlineServiceApplicationManagerApplicationContainerAppInstanceMgmt}}, \iconprovided{}~\vpett{\nameref{int:OnlineServiceOnlineServiceApplicationManagerApplicationContainerAppMessages}}, \iconprovided{}~\vpett{\nameref{int:OnlineServiceOnlineServiceApplicationManagerApplicationContainerAppMonitoring}}, \iconprovided{}~\vpett{\nameref{int:OnlineServiceOnlineServiceApplicationManagerDeviceCommandConstructorCommands}}, \iconprovided{}~\vpett{\nameref{int:OnlineServiceOnlineServiceApplicationManagerApplicationManagementLogicDeviceCommands}}, \iconprovided{}~\vpett{\nameref{int:OnlineServiceOnlineServiceApplicationManagerApplicationExecutionSubsystemMonitorMonitoring}}
		\item[Required interfaces:]~\iconrequired{}~\vpett{\nameref{int:OnlineServiceOnlineServiceApplicationManagerApplicationManagementLogicAppDeviceData}}, \iconrequired{}~\vpett{\nameref{int:OnlineServiceOnlineServiceApplicationManagerApplicationContainerAppInstanceMgmt}}, \iconrequired{}~\vpett{\nameref{int:OnlineServiceOnlineServiceApplicationManagerApplicationContainerAppMessages}}, \iconrequired{}~\vpett{\nameref{int:OnlineServiceOnlineServiceApplicationManagerApplicationContainerAppMonitoring}}, \iconrequired{}~\vpett{\nameref{int:OnlineServiceOnlineServiceApplicationManagerApplicationContainerMonitorAppStatus}}, \iconrequired{}~\vpett{\nameref{int:OnlineServiceOnlineServiceApplicationManagerDeviceCommandConstructorCommands}}, \iconrequired{}~\vpett{\nameref{int:OnlineServiceOnlineServiceNotificationHandlerNotify}}		
	\end{description}
\subsection{ApplicationContainerMonitor}\label{comp:OnlineServiceOnlineServiceApplicationManagerApplicationContainerMonitor}
	\begin{description}[noitemsep,nolistsep]
		\item[Responsibility:]~Monitors ApplicationContainers and keeps track of their ApplicationInstances.
		\item[Super-components:]~\iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceApplicationManager}}
		\item[Sub-components:]~None
		\item[Provided interfaces:]~\iconprovided{}~\vpett{\nameref{int:OnlineServiceOnlineServiceApplicationManagerApplicationContainerMonitorAppStatus}}, \iconprovided{}~\vpett{\nameref{int:OnlineServiceOnlineServiceApplicationManagerApplicationExecutionSubsystemMonitorMonitoring}}
		\item[Required interfaces:]~\iconrequired{}~\vpett{\nameref{int:OnlineServiceOnlineServiceApplicationManagerApplicationContainerAppMonitoring}}, \iconrequired{}~\vpett{\nameref{int:OnlineServiceOnlineServiceNotificationHandlerNotify}}		
	\end{description}
\subsection{ApplicationExecutionSubsystemMonitor}\label{comp:OnlineServiceOnlineServiceApplicationManagerApplicationExecutionSubsystemMonitor}
	\begin{description}[noitemsep,nolistsep]
		\item[Responsibility:]~Monitors the application execution subsystem (\vpett{\nameref{comp:OnlineServiceOnlineServiceApplicationManagerApplicationContainerManager}},\vpett{\nameref{comp:OnlineServiceOnlineServiceApplicationManagerApplicationContainerMonitor}})
		\item[Super-components:]~\iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceApplicationManager}}
		\item[Sub-components:]~None
		\item[Provided interfaces:]~None
		\item[Required interfaces:]~\iconrequired{}~\vpett{\nameref{int:OnlineServiceOnlineServiceApplicationManagerApplicationExecutionSubsystemMonitorMonitoring}}, \iconrequired{}~\vpett{\nameref{int:OnlineServiceOnlineServiceNotificationHandlerNotify}}		
	\end{description}
\subsection{ApplicationFacade}\label{comp:OnlineServiceOnlineServiceApplicationFacade}
	\begin{description}[noitemsep,nolistsep]
		\item[Responsibility:]~Acts as an access point for ApplicationClients and handles all functionality that can be done by application's external front ends.
		\item[Super-components:]~None
		\item[Sub-components:]~None
		\item[Provided interfaces:]~\iconprovided{}~\vpett{\nameref{int:OnlineServiceOnlineServiceApplicationManagerApplicationManagementLogicAppDeviceData}}, \iconprovided{}~\vpett{\nameref{int:OnlineServiceOnlineServiceApplicationManagerApplicationManagementLogicDeviceCommands}}
		\item[Required interfaces:]~\iconrequired{}~\vpett{\nameref{int:OnlineServiceOnlineServiceApplicationManagerApplicationManagementLogicAppDeviceData}}, \iconrequired{}~\vpett{\nameref{int:OnlineServiceOnlineServiceApplicationManagerApplicationManagementLogicDeviceCommands}}		
	\end{description}
\subsection{ApplicationManagementLogic}\label{comp:OnlineServiceOnlineServiceApplicationManagerApplicationManagementLogic}
	\begin{description}[noitemsep,nolistsep]
		\item[Responsibility:]~The entry point for \vpett{\nameref{comp:OnlineServiceOnlineServiceApplicationManager}}. Responsible for tying together all components of the \vpett{\nameref{comp:OnlineServiceOnlineServiceApplicationManager}} and handling requests related to applications.
		\item[Super-components:]~\iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceApplicationManager}}
		\item[Sub-components:]~None
		\item[Provided interfaces:]~\iconprovided{}~\vpett{\nameref{int:OnlineServiceOnlineServiceApplicationManagerApplicationManagementLogicAppDeviceData}}, \iconprovided{}~\vpett{\nameref{int:OnlineServiceOnlineServiceApplicationManagerApplicationContainerAppMessages}}, \iconprovided{}~\vpett{\nameref{int:OnlineServiceOnlineServiceApplicationManagerApplicationManagementLogicDeviceCommands}}, \iconprovided{}~\vpett{\nameref{int:OnlineServiceOnlineServiceApplicationManagerApplicationManagementLogicForwardData}}, \iconprovided{}~\vpett{\nameref{int:OnlineServiceOnlineServiceApplicationManagerApplicationManagementLogicFrontEndAppRequests}}, \iconprovided{}~\vpett{\nameref{int:OnlineServiceOnlineServiceApplicationManagerApplicationManagementLogicGWAppInstanceMgmt}}
		\item[Required interfaces:]~\iconrequired{}~\vpett{\nameref{int:GatewayGatewayDeviceManagerAppDeviceMgmt}}, \iconrequired{}~\vpett{\nameref{int:OnlineServiceOnlineServiceApplicationManagerApplicationContainerAppInstanceMgmt}}, \iconrequired{}~\vpett{\nameref{int:OnlineServiceOnlineServiceApplicationManagerApplicationContainerAppMessages}}, \iconrequired{}~\vpett{\nameref{int:OnlineServiceOnlineServiceApplicationManagerDeviceCommandConstructorCommands}}, \iconrequired{}~\vpett{\nameref{int:OtherDataDatabaseOtherDataDBDBAppMgmt}}, \iconrequired{}~\vpett{\nameref{int:OnlineServiceOnlineServiceInvoiceManagerInvoiceMgmt}}, \iconrequired{}~\vpett{\nameref{int:OnlineServiceOnlineServiceNotificationHandlerNotify}}, \iconrequired{}~\vpett{\nameref{int:OnlineServiceOnlineServiceDeviceDataSchedulerRequestData}}, \iconrequired{}~\vpett{\nameref{int:OnlineServiceOnlineServiceUserRolesManagerRoleMgmt}}, \iconrequired{}~\vpett{\nameref{int:OnlineServiceOnlineServiceTopologyManagerTopologyMgmt}}		
	\end{description}
\subsection{ApplicationManager}\label{comp:OnlineServiceOnlineServiceApplicationManager}
	\begin{description}[noitemsep,nolistsep]
		\item[Responsibility:]~Responsible for all functionality related to applications and application instances. e.g. activating/deactivating application instances, updating an ApplicationInstance's pluggable device redundancy relationships, etc.
		\item[Super-components:]~None
		\item[Sub-components:]~\iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceApplicationManagerDeviceCommandConstructor}}, \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceApplicationManagerApplicationContainerMonitor}}, \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceApplicationManagerApplicationContainerManager}}, \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceApplicationManagerApplicationManagementLogic}}, \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceApplicationManagerApplicationExecutionSubsystemMonitor}}, \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceApplicationManagerDeviceDataConverter}}, \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceApplicationManagerApplicationContainer}}
		\item[Provided interfaces:]~\iconprovided{}~\vpett{\nameref{int:OnlineServiceOnlineServiceApplicationManagerApplicationManagementLogicAppDeviceData}}, \iconprovided{}~\vpett{\nameref{int:OnlineServiceOnlineServiceApplicationManagerApplicationContainerAppMessages}}, \iconprovided{}~\vpett{\nameref{int:OnlineServiceOnlineServiceApplicationManagerApplicationManagementLogicDeviceCommands}}, \iconprovided{}~\vpett{\nameref{int:OnlineServiceOnlineServiceApplicationManagerApplicationManagementLogicForwardData}}, \iconprovided{}~\vpett{\nameref{int:OnlineServiceOnlineServiceApplicationManagerApplicationManagementLogicFrontEndAppRequests}}, \iconprovided{}~\vpett{\nameref{int:OnlineServiceOnlineServiceApplicationManagerApplicationManagementLogicGWAppInstanceMgmt}}
		\item[Required interfaces:]~\iconrequired{}~\vpett{\nameref{int:GatewayGatewayDeviceManagerAppDeviceMgmt}}, \iconrequired{}~\vpett{\nameref{int:OnlineServiceOnlineServiceApplicationManagerApplicationContainerAppInstanceMgmt}}, \iconrequired{}~\vpett{\nameref{int:OnlineServiceOnlineServiceApplicationManagerApplicationContainerAppMessages}}, \iconrequired{}~\vpett{\nameref{int:DeviceDatabaseDeviceDBDBAppDeviceMgmt}}, \iconrequired{}~\vpett{\nameref{int:OtherDataDatabaseOtherDataDBDBAppMgmt}}, \iconrequired{}~\vpett{\nameref{int:GatewayGatewayDeviceManagerDeviceCommands}}, \iconrequired{}~\vpett{\nameref{int:OnlineServiceOnlineServiceInvoiceManagerInvoiceMgmt}}, \iconrequired{}~\vpett{\nameref{int:OnlineServiceOnlineServiceNotificationHandlerNotify}}, \iconrequired{}~\vpett{\nameref{int:OnlineServiceOnlineServiceDeviceDataSchedulerRequestData}}, \iconrequired{}~\vpett{\nameref{int:OnlineServiceOnlineServiceUserRolesManagerRoleMgmt}}, \iconrequired{}~\vpett{\nameref{int:OnlineServiceOnlineServiceTopologyManagerTopologyMgmt}}		
	\end{description}
\subsection{CustomerOgranisationClient}\label{comp:CustomerOgranisationClient}
	\begin{description}[noitemsep,nolistsep]
		\item[Responsibility:]~Represents the client used by a customer organisation. This is the user's dashboard.
		\item[Super-components:]~None
		\item[Sub-components:]~None
		\item[Provided interfaces:]~None
		\item[Required interfaces:]~\iconrequired{}~\vpett{\nameref{int:OnlineServiceOnlineServiceCustomerOrganisationFacadeSubscriptionMgmt}}		
	\end{description}
\subsection{CustomerOrganisationFacade}\label{comp:OnlineServiceOnlineServiceCustomerOrganisationFacade}
	\begin{description}[noitemsep,nolistsep]
		\item[Responsibility:]~Acts as an access point for CustomerOrganisationClients and handles all functionality that can be done by customer organisations.
		\item[Super-components:]~None
		\item[Sub-components:]~None
		\item[Provided interfaces:]~\iconprovided{}~\vpett{\nameref{int:OnlineServiceOnlineServiceCustomerOrganisationFacadeSubscriptionMgmt}}
		\item[Required interfaces:]~\iconrequired{}~\vpett{\nameref{int:OnlineServiceOnlineServiceApplicationManagerApplicationManagementLogicFrontEndAppRequests}}, \iconrequired{}~\vpett{\nameref{int:OnlineServiceOnlineServiceUserRolesManagerRoleMgmt}}, \iconrequired{}~\vpett{\nameref{int:OnlineServiceOnlineServiceSubscriptionManagerSubscriptionMgmt}}, \iconrequired{}~\vpett{\nameref{int:OnlineServiceOnlineServiceTopologyManagerTopologyMgmt}}		
	\end{description}
\subsection{DeviceCommandConstructor}\label{comp:OnlineServiceOnlineServiceApplicationManagerDeviceCommandConstructor}
	\begin{description}[noitemsep,nolistsep]
		\item[Responsibility:]~Is responsible for verifying, constructing, and sending commands from applications for pluggable devices. On the Online Service, It fetches data about pluggable devices from the \vpett{\nameref{comp:DeviceDatabaseDeviceDB}}. On a \vpett{\nameref{comp:GatewayGateway}}, it must be configured to fetch that data from the \vpett{\nameref{comp:GatewayGatewayDeviceManager}}.
		\item[Super-components:]~\iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceApplicationManager}}
		\item[Sub-components:]~None
		\item[Provided interfaces:]~\iconprovided{}~\vpett{\nameref{int:OnlineServiceOnlineServiceApplicationManagerDeviceCommandConstructorCommands}}
		\item[Required interfaces:]~\iconrequired{}~\vpett{\nameref{int:DeviceDatabaseDeviceDBDBAppDeviceMgmt}}, \iconrequired{}~\vpett{\nameref{int:GatewayGatewayDeviceManagerDeviceCommands}}		
	\end{description}
\subsection{DeviceDataConverter}\label{comp:OnlineServiceOnlineServiceApplicationManagerDeviceDataConverter}
	\begin{description}[noitemsep,nolistsep]
		\item[Responsibility:]~The \vpett{\nameref{comp:OnlineServiceOnlineServiceApplicationManagerDeviceDataConverter}} is responsible for conversions pluggable device data for applications. There is one in the Online Service for application instances running in the Online Service and one in Gateways for application instances running on gateways.
		\item[Super-components:]~\iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceApplicationManager}}
		\item[Sub-components:]~None
		\item[Provided interfaces:]~\iconprovided{}~\vpett{\nameref{int:OnlineServiceOnlineServiceApplicationManagerDeviceDataConverterDataConversion}}
		\item[Required interfaces:]~None		
	\end{description}
\subsection{DeviceDataScheduler}\label{comp:OnlineServiceOnlineServiceDeviceDataScheduler}
	\begin{description}[noitemsep,nolistsep]
		\item[Responsibility:]~Responsible for scheduling incoming read and write requests for pluggable device data. Monitors throughput of requests and switches between normal and overload mode when appropriate. Avoids starvation of any type of request.
		\item[Super-components:]~None
		\item[Sub-components:]~None
		\item[Provided interfaces:]~\iconprovided{}~\vpett{\nameref{int:OnlineServiceOnlineServiceDeviceDataSchedulerDeviceData}}, \iconprovided{}~\vpett{\nameref{int:OnlineServiceOnlineServiceDeviceDataSchedulerRequestData}}
		\item[Required interfaces:]~\iconrequired{}~\vpett{\nameref{int:PluggableDeviceDatabasePluggableDeviceDataDBDBDeviceData}}, \iconrequired{}~\vpett{\nameref{int:OnlineServiceOnlineServiceApplicationManagerApplicationManagementLogicForwardData}}		
	\end{description}
\subsection{DeviceDB}\label{comp:DeviceDatabaseDeviceDB}
	\begin{description}[noitemsep,nolistsep]
		\item[Responsibility:]~Contains all information related to devices in the system, but not pluggable device data such as sensor data or actuation statuses. The data includes information about pluggable devices, motes, gateways, topologies, access rights, etc.
		\item[Super-components:]~None
		\item[Sub-components:]~None
		\item[Provided interfaces:]~\iconprovided{}~\vpett{\nameref{int:DeviceDatabaseDeviceDBDBAccessRightsMgmt}}, \iconprovided{}~\vpett{\nameref{int:DeviceDatabaseDeviceDBDBAppDeviceMgmt}}, \iconprovided{}~\vpett{\nameref{int:DeviceDatabaseDeviceDBDBDeviceMgmt}}, \iconprovided{}~\vpett{\nameref{int:DeviceDatabaseDeviceDBDBIODeviceMgmt}}, \iconprovided{}~\vpett{\nameref{int:DeviceDatabaseDeviceDBDBTopologyMgmt}}
		\item[Required interfaces:]~None		
	\end{description}
\subsection{DeviceManager}\label{comp:GatewayGatewayDeviceManager}
	\begin{description}[noitemsep,nolistsep]
		\item[Responsibility:]~Monitors connected/operational devices on a gateway. Sends notifications in case of hardware failure. Can send a command to disable or reactivate applications when necessary. \\
Keeps a local cache of data about pluggable devices from the \vpett{\nameref{comp:DeviceDatabaseDeviceDB}}, such as specific formatting syntax, possible configuration parameters, etc. This data can then be used by the \vpett{\nameref{comp:OnlineServiceOnlineServiceApplicationManagerDeviceCommandConstructor}} on the \vpett{\nameref{comp:GatewayGatewayDeviceManager}} to convert commands from ApplicationContainers on the gateway before they are sent to pluggable devices.
		\item[Super-components:]~\iconcomponent{}~\vpett{\nameref{comp:GatewayGateway}}
		\item[Sub-components:]~None
		\item[Provided interfaces:]~\iconprovided{}~\vpett{\nameref{int:GatewayGatewayDeviceManagerAppDeviceMgmt}}, \iconprovided{}~\vpett{\nameref{int:GatewayGatewayDeviceManagerDeviceCommands}}, \iconprovided{}~\vpett{\nameref{int:GatewayGatewayDeviceManagerDeviceData}}, \iconprovided{}~\vpett{\nameref{int:GatewayGatewayDeviceManagerDeviceMgmt}}, \iconprovided{}~\vpett{\nameref{int:GatewayGatewayDeviceManagerHeartbeat}}
		\item[Required interfaces:]~\iconrequired{}~\vpett{\nameref{int:MoteMoteActuate}}, \iconrequired{}~\vpett{\nameref{int:OnlineServiceOnlineServiceApplicationManagerApplicationContainerAppInstanceMgmt}}, \iconrequired{}~\vpett{\nameref{int:MoteMoteConfig}}, \iconrequired{}~\vpett{\nameref{int:DeviceDatabaseDeviceDBDBDeviceMgmt}}, \iconrequired{}~\vpett{\nameref{int:OnlineServiceOnlineServiceDeviceDataSchedulerDeviceData}}, \iconrequired{}~\vpett{\nameref{int:OnlineServiceOnlineServiceApplicationManagerApplicationManagementLogicGWAppInstanceMgmt}}, \iconrequired{}~\vpett{\nameref{int:OnlineServiceOnlineServiceNotificationHandlerNotify}}, \iconrequired{}~\vpett{\nameref{int:MoteMoteRequestData}}, \iconrequired{}~\vpett{\nameref{int:OnlineServiceOnlineServiceTopologyManagerTopologyMgmt}}		
	\end{description}
\subsection{Gateway}\label{comp:GatewayGateway}
	\begin{description}[noitemsep,nolistsep]
		\item[Responsibility:]~Represents a SIoTIP gateway.
		\item[Super-components:]~None
		\item[Sub-components:]~\iconcomponent{}~\vpett{\nameref{comp:GatewayGatewayDeviceManager}}, \iconcomponent{}~\vpett{\nameref{comp:GatewayGatewayOnlineServiceBrokerMonitor}}, \iconcomponent{}~\vpett{\nameref{comp:GatewayGatewayOnlineServiceBroker}}
		\item[Provided interfaces:]~\iconprovided{}~\vpett{\nameref{int:GatewayGatewayDeviceManagerDeviceData}}, \iconprovided{}~\vpett{\nameref{int:GatewayGatewayDeviceManagerDeviceMgmt}}, \iconprovided{}~\vpett{\nameref{int:GatewayGatewayDeviceManagerHeartbeat}}, \iconprovided{}~\vpett{\nameref{int:GatewayGatewayOnlineServiceBrokerOSBrokerLogicOSCommunication}}
		\item[Required interfaces:]~\iconrequired{}~\vpett{\nameref{int:MoteMoteActuate}}, \iconrequired{}~\vpett{\nameref{int:MoteMoteConfig}}, \iconrequired{}~\vpett{\nameref{int:OnlineServiceOnlineServiceGatewayBrokerGWBrokerLogicGWCommunication}}, \iconrequired{}~\vpett{\nameref{int:MoteMoteRequestData}}		
	\end{description}
\subsection{GatewayBroker}\label{comp:OnlineServiceOnlineServiceGatewayBroker}
	\begin{description}[noitemsep,nolistsep]
		\item[Responsibility:]~Isolates communication-related concerns between the Online Service Gateways and along with \vpett{\nameref{comp:GatewayGatewayOnlineServiceBroker}} on Gateways. Forwards requests from one party to the other and transmits results and possible exceptions. \\
Sends acknowledgements for all messages sent by Gateways so that they can detect failures.
		\item[Super-components:]~None
		\item[Sub-components:]~\iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceGatewayBrokerGWBrokerLogic}}, \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceGatewayBrokerGatewayMonitor}}
		\item[Provided interfaces:]~\iconprovided{}~\vpett{\nameref{int:GatewayGatewayDeviceManagerAppDeviceMgmt}}, \iconprovided{}~\vpett{\nameref{int:OnlineServiceOnlineServiceApplicationManagerApplicationContainerAppInstanceMgmt}}, \iconprovided{}~\vpett{\nameref{int:OnlineServiceOnlineServiceApplicationManagerApplicationContainerAppMessages}}, \iconprovided{}~\vpett{\nameref{int:GatewayGatewayDeviceManagerDeviceCommands}}, \iconprovided{}~\vpett{\nameref{int:GWBrokerMonitoring}}, \iconprovided{}~\vpett{\nameref{int:OnlineServiceOnlineServiceGatewayBrokerGWBrokerLogicGWCommunication}}
		\item[Required interfaces:]~\iconrequired{}~\vpett{\nameref{int:OnlineServiceOnlineServiceApplicationManagerApplicationManagementLogicAppDeviceData}}, \iconrequired{}~\vpett{\nameref{int:OnlineServiceOnlineServiceApplicationManagerApplicationContainerAppMessages}}, \iconrequired{}~\vpett{\nameref{int:DeviceDatabaseDeviceDBDBDeviceMgmt}}, \iconrequired{}~\vpett{\nameref{int:OnlineServiceOnlineServiceDeviceDataSchedulerDeviceData}}, \iconrequired{}~\vpett{\nameref{int:OnlineServiceOnlineServiceApplicationManagerApplicationManagementLogicGWAppInstanceMgmt}}, \iconrequired{}~\vpett{\nameref{int:OnlineServiceOnlineServiceNotificationHandlerNotify}}, \iconrequired{}~\vpett{\nameref{int:GatewayGatewayOnlineServiceBrokerOSBrokerLogicOSCommunication}}, \iconrequired{}~\vpett{\nameref{int:OnlineServiceOnlineServiceTopologyManagerTopologyMgmt}}		
	\end{description}
\subsection{GatewayBrokerMonitor}\label{comp:GatewayBrokerMonitor}
	\begin{description}[noitemsep,nolistsep]
		\item[Responsibility:]~Monitors the communication component on the Online Service for communication with Gateways on the Online Service. Notifies SIoTIP system administrators in case of failures.
		\item[Super-components:]~None
		\item[Sub-components:]~None
		\item[Provided interfaces:]~None
		\item[Required interfaces:]~\iconrequired{}~\vpett{\nameref{int:DeviceDatabaseDeviceDBDBDeviceMgmt}}, \iconrequired{}~\vpett{\nameref{int:GWBrokerMonitoring}}, \iconrequired{}~\vpett{\nameref{int:OnlineServiceOnlineServiceNotificationHandlerNotify}}		
	\end{description}
\subsection{GatewayMonitor}\label{comp:OnlineServiceOnlineServiceGatewayBrokerGatewayMonitor}
	\begin{description}[noitemsep,nolistsep]
		\item[Responsibility:]~Monitors the connectivity status of all gateways. Can detect that a gateway is not sending data anymore based on the expected synchronisation interval. If 3 consecutive expected synchronisations do not arrive within 1 minute of their expected arrival time, this is detected as a gateway outage. \\
When outages of gateways are detected, the infrastructure owners that own the gateways and a SIoTIP system administrator are notified. \\
When the connectivity status change of a \vpett{\nameref{comp:GatewayGateway}} is detected, this is saved in the \vpett{\nameref{comp:DeviceDatabaseDeviceDB}}. \\
Quick math to check we are not doing something very dumb here:
5000 gateways * (32 bit gatewayID + 4 bit countSynchronisationsMissed + 64 bit lastSyncPeriod + 64 bit nextSyncPeriod) == approx 100kb => Seems ok
		\item[Super-components:]~\iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceGatewayBroker}}
		\item[Sub-components:]~None
		\item[Provided interfaces:]~\iconprovided{}~\vpett{\nameref{int:OnlineServiceOnlineServiceGatewayBrokerGatewayMonitorGatewayUpdates}}
		\item[Required interfaces:]~\iconrequired{}~\vpett{\nameref{int:DeviceDatabaseDeviceDBDBDeviceMgmt}}, \iconrequired{}~\vpett{\nameref{int:OnlineServiceOnlineServiceNotificationHandlerNotify}}		
	\end{description}
\subsection{GWBrokerLogic}\label{comp:OnlineServiceOnlineServiceGatewayBrokerGWBrokerLogic}
	\begin{description}[noitemsep,nolistsep]
		\item[Responsibility:]~Handles all actual functionality related to communication. When Gateways synchronise with the Online Service, this component notifies the \vpett{\nameref{comp:OnlineServiceOnlineServiceGatewayBrokerGatewayMonitor}} so that it can keep track of \vpett{\nameref{comp:GatewayGateway}}'s status.
		\item[Super-components:]~\iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceGatewayBroker}}
		\item[Sub-components:]~None
		\item[Provided interfaces:]~\iconprovided{}~\vpett{\nameref{int:GatewayGatewayDeviceManagerAppDeviceMgmt}}, \iconprovided{}~\vpett{\nameref{int:OnlineServiceOnlineServiceApplicationManagerApplicationContainerAppInstanceMgmt}}, \iconprovided{}~\vpett{\nameref{int:OnlineServiceOnlineServiceApplicationManagerApplicationContainerAppMessages}}, \iconprovided{}~\vpett{\nameref{int:DeviceDatabaseDeviceDBDBDeviceMgmt}}, \iconprovided{}~\vpett{\nameref{int:GatewayGatewayDeviceManagerDeviceCommands}}, \iconprovided{}~\vpett{\nameref{int:OnlineServiceOnlineServiceGatewayBrokerGWBrokerLogicGWCommunication}}, \iconprovided{}~\vpett{\nameref{int:OnlineServiceOnlineServiceNotificationHandlerNotify}}
		\item[Required interfaces:]~\iconrequired{}~\vpett{\nameref{int:OnlineServiceOnlineServiceApplicationManagerApplicationManagementLogicAppDeviceData}}, \iconrequired{}~\vpett{\nameref{int:OnlineServiceOnlineServiceApplicationManagerApplicationContainerAppMessages}}, \iconrequired{}~\vpett{\nameref{int:DeviceDatabaseDeviceDBDBDeviceMgmt}}, \iconrequired{}~\vpett{\nameref{int:OnlineServiceOnlineServiceDeviceDataSchedulerDeviceData}}, \iconrequired{}~\vpett{\nameref{int:OnlineServiceOnlineServiceGatewayBrokerGatewayMonitorGatewayUpdates}}, \iconrequired{}~\vpett{\nameref{int:OnlineServiceOnlineServiceApplicationManagerApplicationManagementLogicGWAppInstanceMgmt}}, \iconrequired{}~\vpett{\nameref{int:OnlineServiceOnlineServiceNotificationHandlerNotify}}, \iconrequired{}~\vpett{\nameref{int:GatewayGatewayOnlineServiceBrokerOSBrokerLogicOSCommunication}}, \iconrequired{}~\vpett{\nameref{int:OnlineServiceOnlineServiceTopologyManagerTopologyMgmt}}		
	\end{description}
\subsection{InfrastructreOwnerClient}\label{comp:InfrastructreOwnerClient}
	\begin{description}[noitemsep,nolistsep]
		\item[Responsibility:]~Represents the client used by an infrastructure owner. This is the user's dashboard.
		\item[Super-components:]~None
		\item[Sub-components:]~None
		\item[Provided interfaces:]~None
		\item[Required interfaces:]~\iconrequired{}~\vpett{\nameref{int:OnlineServiceOnlineServiceInfrastructureOwnerFacadeAccessRights}}		
	\end{description}
\subsection{InfrastructureOwnerFacade}\label{comp:OnlineServiceOnlineServiceInfrastructureOwnerFacade}
	\begin{description}[noitemsep,nolistsep]
		\item[Responsibility:]~Acts as an access point for InfrastructureOwnerClients and handles all functionality that can be done by infrastructure owners.
		\item[Super-components:]~None
		\item[Sub-components:]~None
		\item[Provided interfaces:]~\iconprovided{}~\vpett{\nameref{int:OnlineServiceOnlineServiceInfrastructureOwnerFacadeAccessRights}}
		\item[Required interfaces:]~\iconrequired{}~\vpett{\nameref{int:OnlineServiceOnlineServiceAccessRightsManagerAccessRightsMgmt}}, \iconrequired{}~\vpett{\nameref{int:OnlineServiceOnlineServiceApplicationManagerApplicationManagementLogicFrontEndAppRequests}}, \iconrequired{}~\vpett{\nameref{int:OnlineServiceOnlineServiceInfrastructureOwnerManagerIOMgmt}}		
	\end{description}
\subsection{InfrastructureOwnerManager}\label{comp:OnlineServiceOnlineServiceInfrastructureOwnerManager}
	\begin{description}[noitemsep,nolistsep]
		\item[Responsibility:]~Responsible for all functionality related to infrastructure owners. E.g. looking up the devices they own, retrieving a list of customer organisations that they are associated to, etc.
		\item[Super-components:]~None
		\item[Sub-components:]~None
		\item[Provided interfaces:]~\iconprovided{}~\vpett{\nameref{int:OnlineServiceOnlineServiceInfrastructureOwnerManagerIOMgmt}}
		\item[Required interfaces:]~\iconrequired{}~\vpett{\nameref{int:DeviceDatabaseDeviceDBDBIODeviceMgmt}}, \iconrequired{}~\vpett{\nameref{int:OtherDataDatabaseOtherDataDBDBIOMgmt}}		
	\end{description}
\subsection{InvoiceManager}\label{comp:OnlineServiceOnlineServiceInvoiceManager}
	\begin{description}[noitemsep,nolistsep]
		\item[Responsibility:]~Responsible for all functionality related to access rights to invoicing.
E.g. creating invoices.
		\item[Super-components:]~None
		\item[Sub-components:]~None
		\item[Provided interfaces:]~\iconprovided{}~\vpett{\nameref{int:OnlineServiceOnlineServiceInvoiceManagerInvoiceMgmt}}
		\item[Required interfaces:]~\iconrequired{}~\vpett{\nameref{int:OtherDataDatabaseOtherDataDBDBInvoiceMgmt}}		
	\end{description}
\subsection{Mote}\label{comp:MoteMote}
	\begin{description}[noitemsep,nolistsep]
		\item[Responsibility:]~Represents a MicroPnP mote.
		\item[Super-components:]~None
		\item[Sub-components:]~None
		\item[Provided interfaces:]~\iconprovided{}~\vpett{\nameref{int:MoteMoteActuate}}, \iconprovided{}~\vpett{\nameref{int:MoteMoteConfig}}, \iconprovided{}~\vpett{\nameref{int:GatewayGatewayDeviceManagerDeviceData}}, \iconprovided{}~\vpett{\nameref{int:MoteMoteRequestData}}
		\item[Required interfaces:]~\iconrequired{}~\vpett{\nameref{int:PuggableDevicePluggableDeviceActuate}}, \iconrequired{}~\vpett{\nameref{int:PuggableDevicePluggableDeviceConfig}}, \iconrequired{}~\vpett{\nameref{int:GatewayGatewayDeviceManagerDeviceData}}, \iconrequired{}~\vpett{\nameref{int:GatewayGatewayDeviceManagerDeviceMgmt}}, \iconrequired{}~\vpett{\nameref{int:GatewayGatewayDeviceManagerHeartbeat}}, \iconrequired{}~\vpett{\nameref{int:PuggableDevicePluggableDeviceRequestData}}		
	\end{description}
\subsection{NotificationDeliveryService}\label{comp:NotificationDeliveryServiceNodeNotificationDeliveryService}
	\begin{description}[noitemsep,nolistsep]
		\item[Responsibility:]~Represents a third party notification delivery service.
		\item[Super-components:]~None
		\item[Sub-components:]~None
		\item[Provided interfaces:]~\iconprovided{}~\vpett{\nameref{int:NotificationDeliveryServiceNodeNotificationDeliveryServiceNotificationDeliveryMgmt}}
		\item[Required interfaces:]~\iconrequired{}~\vpett{\nameref{int:OnlineServiceOnlineServiceNotificationHandlerDeliveryMgmt}}		
	\end{description}
\subsection{NotificationHandler}\label{comp:OnlineServiceOnlineServiceNotificationHandler}
	\begin{description}[noitemsep,nolistsep]
		\item[Responsibility:]~Responsible for generation, storage, and delivery of notifications based on users' preferred communication channel.
		\item[Super-components:]~None
		\item[Sub-components:]~None
		\item[Provided interfaces:]~\iconprovided{}~\vpett{\nameref{int:OnlineServiceOnlineServiceNotificationHandlerDeliveryMgmt}}, \iconprovided{}~\vpett{\nameref{int:OnlineServiceOnlineServiceNotificationHandlerNotify}}
		\item[Required interfaces:]~\iconrequired{}~\vpett{\nameref{int:OtherDataDatabaseOtherDataDBDBNotificationMgmt}}, \iconrequired{}~\vpett{\nameref{int:NotificationDeliveryServiceNodeNotificationDeliveryServiceNotificationDeliveryMgmt}}		
	\end{description}
\subsection{OnlineServiceBroker}\label{comp:GatewayGatewayOnlineServiceBroker}
	\begin{description}[noitemsep,nolistsep]
		\item[Responsibility:]~Isolates communication-related concerns between Gateways and the Online Service along with \vpett{\nameref{comp:OnlineServiceOnlineServiceGatewayBroker}} on the Online Service. Forwards requests from one party to the other and transmits results and possible exceptions. \\
Keeps track of reachability status of the Online Service. \\
Can store at least 3 days of pluggable data and application commands before old data has to be overwritten.
		\item[Super-components:]~\iconcomponent{}~\vpett{\nameref{comp:GatewayGateway}}
		\item[Sub-components:]~\iconcomponent{}~\vpett{\nameref{comp:GatewayGatewayOnlineServiceBrokerOSBrokerLogic}}, \iconcomponent{}~\vpett{\nameref{comp:GatewayGatewayOnlineServiceBrokerOnlineServiceMonitor}}, \iconcomponent{}~\vpett{\nameref{comp:GatewayGatewayOnlineServiceBrokerRequestStore}}
		\item[Provided interfaces:]~\iconprovided{}~\vpett{\nameref{int:OnlineServiceOnlineServiceApplicationManagerApplicationManagementLogicAppDeviceData}}, \iconprovided{}~\vpett{\nameref{int:OnlineServiceOnlineServiceApplicationManagerApplicationContainerAppMessages}}, \iconprovided{}~\vpett{\nameref{int:DeviceDatabaseDeviceDBDBDeviceMgmt}}, \iconprovided{}~\vpett{\nameref{int:OnlineServiceOnlineServiceDeviceDataSchedulerDeviceData}}, \iconprovided{}~\vpett{\nameref{int:OnlineServiceOnlineServiceApplicationManagerApplicationManagementLogicGWAppInstanceMgmt}}, \iconprovided{}~\vpett{\nameref{int:OnlineServiceOnlineServiceNotificationHandlerNotify}}, \iconprovided{}~\vpett{\nameref{int:GatewayGatewayOnlineServiceBrokerMonitorOSBrokerMonitoring}}, \iconprovided{}~\vpett{\nameref{int:GatewayGatewayOnlineServiceBrokerOSBrokerLogicOSCommunication}}, \iconprovided{}~\vpett{\nameref{int:OnlineServiceOnlineServiceTopologyManagerTopologyMgmt}}
		\item[Required interfaces:]~\iconrequired{}~\vpett{\nameref{int:GatewayGatewayDeviceManagerAppDeviceMgmt}}, \iconrequired{}~\vpett{\nameref{int:OnlineServiceOnlineServiceApplicationManagerApplicationContainerAppInstanceMgmt}}, \iconrequired{}~\vpett{\nameref{int:OnlineServiceOnlineServiceApplicationManagerApplicationContainerAppMessages}}, \iconrequired{}~\vpett{\nameref{int:GatewayGatewayDeviceManagerDeviceCommands}}, \iconrequired{}~\vpett{\nameref{int:OnlineServiceOnlineServiceGatewayBrokerGWBrokerLogicGWCommunication}}		
	\end{description}
\subsection{OnlineServiceBrokerMonitor}\label{comp:GatewayGatewayOnlineServiceBrokerMonitor}
	\begin{description}[noitemsep,nolistsep]
		\item[Responsibility:]~Monitors the communication component on Gateways. If the communication component fails, the monitor tries to restart it. If the failure persists, makes the gateway reboots itself entirely.
		\item[Super-components:]~\iconcomponent{}~\vpett{\nameref{comp:GatewayGateway}}
		\item[Sub-components:]~None
		\item[Provided interfaces:]~None
		\item[Required interfaces:]~\iconrequired{}~\vpett{\nameref{int:GatewayGatewayOnlineServiceBrokerMonitorOSBrokerMonitoring}}		
	\end{description}
\subsection{OnlineServiceMonitor}\label{comp:GatewayGatewayOnlineServiceBrokerOnlineServiceMonitor}
	\begin{description}[noitemsep,nolistsep]
		\item[Responsibility:]~Monitors the \vpett{\nameref{comp:GatewayGateway}}'s connectivity to the Online Service. \\
If the Online Service or the communication channel has failed, all requests to the Online Service will be stopped and stay stored in the \vpett{\nameref{comp:GatewayGatewayOnlineServiceBrokerRequestStore}}. An explicit command for this is not necessary, because the requests in the \vpett{\nameref{comp:GatewayGatewayOnlineServiceBrokerRequestStore}} will not be deleted, since no acknowledgements are received anymore from the Online Service.\\
After the monitor detects that a connection to the Online Service is possible again, it makes the gateway start synchronising again. \\
When the Online Service is unreachable, application parts running locally on the SIoTIP gateway continue to operate normally.
		\item[Super-components:]~\iconcomponent{}~\vpett{\nameref{comp:GatewayGatewayOnlineServiceBroker}} $\triangleright$ \iconcomponent{}~\vpett{\nameref{comp:GatewayGateway}}
		\item[Sub-components:]~None
		\item[Provided interfaces:]~\iconprovided{}~\vpett{\nameref{int:GatewayGatewayOnlineServiceBrokerOnlineServiceMonitorOSUpdates}}
		\item[Required interfaces:]~\iconrequired{}~\vpett{\nameref{int:GatewayGatewayOnlineServiceBrokerOSBrokerLogicOSMonitoring}}		
	\end{description}
\subsection{OSBrokerLogic}\label{comp:GatewayGatewayOnlineServiceBrokerOSBrokerLogic}
	\begin{description}[noitemsep,nolistsep]
		\item[Responsibility:]~Handles all actual functionality related to communication. When a message comes in from the Online Service, lets the \vpett{\nameref{comp:GatewayGatewayOnlineServiceBrokerOnlineServiceMonitor}} know that a message has been received. When an acknowledgements for requests are received from the Online Service, notifies the \vpett{\nameref{comp:GatewayGatewayOnlineServiceBrokerRequestStore}} of this so that it can delete the request from its storage.
		\item[Super-components:]~\iconcomponent{}~\vpett{\nameref{comp:GatewayGatewayOnlineServiceBroker}} $\triangleright$ \iconcomponent{}~\vpett{\nameref{comp:GatewayGateway}}
		\item[Sub-components:]~None
		\item[Provided interfaces:]~\iconprovided{}~\vpett{\nameref{int:OnlineServiceOnlineServiceApplicationManagerApplicationManagementLogicAppDeviceData}}, \iconprovided{}~\vpett{\nameref{int:OnlineServiceOnlineServiceApplicationManagerApplicationContainerAppMessages}}, \iconprovided{}~\vpett{\nameref{int:DeviceDatabaseDeviceDBDBDeviceMgmt}}, \iconprovided{}~\vpett{\nameref{int:OnlineServiceOnlineServiceDeviceDataSchedulerDeviceData}}, \iconprovided{}~\vpett{\nameref{int:OnlineServiceOnlineServiceApplicationManagerApplicationManagementLogicGWAppInstanceMgmt}}, \iconprovided{}~\vpett{\nameref{int:OnlineServiceOnlineServiceNotificationHandlerNotify}}, \iconprovided{}~\vpett{\nameref{int:GatewayGatewayOnlineServiceBrokerOSBrokerLogicOSCommunication}}, \iconprovided{}~\vpett{\nameref{int:GatewayGatewayOnlineServiceBrokerOSBrokerLogicOSMonitoring}}, \iconprovided{}~\vpett{\nameref{int:OnlineServiceOnlineServiceTopologyManagerTopologyMgmt}}
		\item[Required interfaces:]~\iconrequired{}~\vpett{\nameref{int:GatewayGatewayDeviceManagerAppDeviceMgmt}}, \iconrequired{}~\vpett{\nameref{int:OnlineServiceOnlineServiceApplicationManagerApplicationContainerAppInstanceMgmt}}, \iconrequired{}~\vpett{\nameref{int:OnlineServiceOnlineServiceApplicationManagerApplicationContainerAppMessages}}, \iconrequired{}~\vpett{\nameref{int:GatewayGatewayDeviceManagerDeviceCommands}}, \iconrequired{}~\vpett{\nameref{int:OnlineServiceOnlineServiceGatewayBrokerGWBrokerLogicGWCommunication}}, \iconrequired{}~\vpett{\nameref{int:GatewayGatewayOnlineServiceBrokerOnlineServiceMonitorOSUpdates}}, \iconrequired{}~\vpett{\nameref{int:GatewayGatewayOnlineServiceBrokerRequestStoreRequests}}		
	\end{description}
\subsection{OtherDataDB}\label{comp:OtherDataDatabaseOtherDataDB}
	\begin{description}[noitemsep,nolistsep]
		\item[Responsibility:]~General database for data. For example, storage of data about notifications.
		\item[Super-components:]~None
		\item[Sub-components:]~None
		\item[Provided interfaces:]~\iconprovided{}~\vpett{\nameref{int:OtherDataDatabaseOtherDataDBDBAppMgmt}}, \iconprovided{}~\vpett{\nameref{int:OtherDataDatabaseOtherDataDBDBInvoiceMgmt}}, \iconprovided{}~\vpett{\nameref{int:OtherDataDatabaseOtherDataDBDBIOMgmt}}, \iconprovided{}~\vpett{\nameref{int:OtherDataDatabaseOtherDataDBDBNotificationMgmt}}, \iconprovided{}~\vpett{\nameref{int:OtherDataDatabaseOtherDataDBDBSubscriptionMgmt}}, \iconprovided{}~\vpett{\nameref{int:OtherDataDatabaseOtherDataDBDBUserRoleMgmt}}
		\item[Required interfaces:]~None		
	\end{description}
\subsection{PluggableDevice}\label{comp:PuggableDevicePluggableDevice}
	\begin{description}[noitemsep,nolistsep]
		\item[Responsibility:]~Represents a pluggable device that plugs into MicroPnP motes. Can be a sensor or an actuator. \\
Sensors produce measurements and send them to the a gateway via a MicroPnP
mote. \\
Actuators have one or more actions associated with them. For example, a switch
can "turn on" and "turn off".
		\item[Super-components:]~None
		\item[Sub-components:]~None
		\item[Provided interfaces:]~\iconprovided{}~\vpett{\nameref{int:PuggableDevicePluggableDeviceActuate}}, \iconprovided{}~\vpett{\nameref{int:PuggableDevicePluggableDeviceConfig}}, \iconprovided{}~\vpett{\nameref{int:PuggableDevicePluggableDeviceRequestData}}
		\item[Required interfaces:]~\iconrequired{}~\vpett{\nameref{int:GatewayGatewayDeviceManagerDeviceData}}		
	\end{description}
\subsection{PluggableDeviceDataDB}\label{comp:PluggableDeviceDatabasePluggableDeviceDataDB}
	\begin{description}[noitemsep,nolistsep]
		\item[Responsibility:]~Database dedicated to pluggable device data only.
		\item[Super-components:]~None
		\item[Sub-components:]~None
		\item[Provided interfaces:]~\iconprovided{}~\vpett{\nameref{int:PluggableDeviceDatabasePluggableDeviceDataDBDBDeviceData}}
		\item[Required interfaces:]~None		
	\end{description}
\subsection{RequestStore}\label{comp:GatewayGatewayOnlineServiceBrokerRequestStore}
	\begin{description}[noitemsep,nolistsep]
		\item[Responsibility:]~Temporarily stores all pluggable data and issued application commands until they can be deleted (= until an acknowledgement has been received for the request by the Online Service). Passes all requests along to the BrokerLogic and includes a unique requestID in them, so that the Online Service can send an acknowledgement for those messages. Can store at least 3 days of pluggable data before old data has to be overwritten.
		\item[Super-components:]~\iconcomponent{}~\vpett{\nameref{comp:GatewayGatewayOnlineServiceBroker}} $\triangleright$ \iconcomponent{}~\vpett{\nameref{comp:GatewayGateway}}
		\item[Sub-components:]~None
		\item[Provided interfaces:]~\iconprovided{}~\vpett{\nameref{int:OnlineServiceOnlineServiceApplicationManagerApplicationContainerAppMessages}}, \iconprovided{}~\vpett{\nameref{int:OnlineServiceOnlineServiceDeviceDataSchedulerDeviceData}}, \iconprovided{}~\vpett{\nameref{int:GatewayGatewayOnlineServiceBrokerRequestStoreRequests}}
		\item[Required interfaces:]~\iconrequired{}~\vpett{\nameref{int:OnlineServiceOnlineServiceApplicationManagerApplicationContainerAppMessages}}, \iconrequired{}~\vpett{\nameref{int:OnlineServiceOnlineServiceDeviceDataSchedulerDeviceData}}		
	\end{description}
\subsection{SubscriptionManager}\label{comp:OnlineServiceOnlineServiceSubscriptionManager}
	\begin{description}[noitemsep,nolistsep]
		\item[Responsibility:]~Responsible for all functionality related to access rights to subscriptions. E.g. retrieving the applications that a customer organisation can subscribe to, creating new subscriptions to ApplicationInstances, etc.
		\item[Super-components:]~None
		\item[Sub-components:]~None
		\item[Provided interfaces:]~\iconprovided{}~\vpett{\nameref{int:OnlineServiceOnlineServiceSubscriptionManagerSubscriptionMgmt}}
		\item[Required interfaces:]~\iconrequired{}~\vpett{\nameref{int:OtherDataDatabaseOtherDataDBDBSubscriptionMgmt}}, \iconrequired{}~\vpett{\nameref{int:OnlineServiceOnlineServiceApplicationManagerApplicationManagementLogicFrontEndAppRequests}}		
	\end{description}
\subsection{TopologyManager}\label{comp:OnlineServiceOnlineServiceTopologyManager}
	\begin{description}[noitemsep,nolistsep]
		\item[Responsibility:]~Responsible for all functionality related to topology. E.g. Adding a new mote to the topology of an infrastructure, checking whether or not all devices used by an application are active in the topology, etc.
		\item[Super-components:]~None
		\item[Sub-components:]~None
		\item[Provided interfaces:]~\iconprovided{}~\vpett{\nameref{int:OnlineServiceOnlineServiceTopologyManagerTopologyMgmt}}
		\item[Required interfaces:]~\iconrequired{}~\vpett{\nameref{int:DeviceDatabaseDeviceDBDBTopologyMgmt}}		
	\end{description}
\subsection{UserRolesManager}\label{comp:OnlineServiceOnlineServiceUserRolesManager}
	\begin{description}[noitemsep,nolistsep]
		\item[Responsibility:]~Responsible for all functionality related to access rights to user roles. E.g. retrieving the user roles that are mandatory for a certain application, updating the roles assigned to users, etc.
		\item[Super-components:]~None
		\item[Sub-components:]~None
		\item[Provided interfaces:]~\iconprovided{}~\vpett{\nameref{int:OnlineServiceOnlineServiceUserRolesManagerRoleMgmt}}
		\item[Required interfaces:]~\iconrequired{}~\vpett{\nameref{int:OtherDataDatabaseOtherDataDBDBUserRoleMgmt}}		
	\end{description}

% END COMPONENTS

% INTERFACES
\section{Interfaces} \label{sec:interfaces}
  %%%%%%%% AccessRights
  \subsection{AccessRights}\label{int:OnlineServiceOnlineServiceInfrastructureOwnerFacadeAccessRights}
    \begin{description}[noitemsep,nolistsep]
      \item[Provided by:] \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceInfrastructureOwnerFacade}}
      \item[Required by:] \iconcomponent{}~\vpett{\nameref{comp:InfrastructreOwnerClient}}
      \item[Operations:] ~
    \begin{itemize}[noitemsep,nolistsep,leftmargin=-.25cm]
      \item \textsf{ configureDevice(\ref{data:DataTypesPluggableDeviceID} pID)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Returns a map of AccessRights and the IDs of customer organisations that have those AccessRights.
\item Created for: UC9.3 - UC9.4
        \end{itemize}
      \item \textsf{List\textless{}\ref{data:DataTypesPluggableDeviceInfo}\textgreater{} getAccessRights(int infrastructureOwnerID)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Returns a list of PluggableDeviceInfo to display so an infrastructure owner can select a device to configure access rights.
\item Created for: UC9.1
        \end{itemize}
      \item \textsf{void updateAccessRights()}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Updates the access rights on a certain pluggable device for a group of customer organisations.
\item Created for: UC9.6
        \end{itemize}
    \end{itemize}
    \end{description}

  %%%%%%%% AccessRightsMgmt
  \subsection{AccessRightsMgmt}\label{int:OnlineServiceOnlineServiceAccessRightsManagerAccessRightsMgmt}
    \begin{description}[noitemsep,nolistsep]
      \item[Provided by:] \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceAccessRightsManager}}
      \item[Required by:] \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceInfrastructureOwnerFacade}}
      \item[Operations:] ~
    \begin{itemize}[noitemsep,nolistsep,leftmargin=-.25cm]
      \item \textsf{ getCustomerOrganisationsRights(\ref{data:DataTypesPluggableDeviceID} pID, List\textless{}int\textgreater{} custOrgIDs)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Returns a map of AccessRights and the IDs of customer organisations that have those AccessRights on a certain pluggable device.
\item Created for: UC9.4
        \end{itemize}
      \item \textsf{void updateAccessRights()}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Updates the access rights on a certain pluggable device for a group of customer organisations.
\item Created for: UC9.7
        \end{itemize}
    \end{itemize}
    \end{description}

  %%%%%%%% Actuate
  \subsection{Actuate}\label{int:PuggableDevicePluggableDeviceActuate}
    \begin{description}[noitemsep,nolistsep]
      \item[Provided by:] \iconcomponent{}~\vpett{\nameref{comp:PuggableDevicePluggableDevice}}
      \item[Required by:] \iconcomponent{}~\vpett{\nameref{comp:MoteMote}}
      \item[Operations:] ~
    \begin{itemize}[noitemsep,nolistsep,leftmargin=-.25cm]
      \item \textsf{void sendActuationCommand(string commandName)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Send an actuation command to the actuator. Sending an unknown actuation command has no effect.
        \end{itemize}
    \end{itemize}
    \end{description}

  %%%%%%%% Actuate
  \subsection{Actuate}\label{int:MoteMoteActuate}
    \begin{description}[noitemsep,nolistsep]
      \item[Provided by:] \iconcomponent{}~\vpett{\nameref{comp:MoteMote}}
      \item[Required by:] \iconcomponent{}~\vpett{\nameref{comp:GatewayGatewayDeviceManager}}, \iconcomponent{}~\vpett{\nameref{comp:GatewayGateway}}
      \item[Operations:] ~
    \begin{itemize}[noitemsep,nolistsep,leftmargin=-.25cm]
      \item \textsf{void sendActuationCommand(\ref{data:DataTypesPluggableDeviceID} pID, string commandName)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Send an actuation command to an actuator. Sending an unknown actuation command has no effect.
        \end{itemize}
    \end{itemize}
    \end{description}

  %%%%%%%% AppDeviceData
  \subsection{AppDeviceData}\label{int:OnlineServiceOnlineServiceApplicationManagerApplicationManagementLogicAppDeviceData}
    \begin{description}[noitemsep,nolistsep]
      \item[Provided by:] \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceApplicationManagerApplicationContainerManager}}, \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceApplicationFacade}}, \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceApplicationManagerApplicationManagementLogic}}, \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceApplicationManager}}, \iconcomponent{}~\vpett{\nameref{comp:GatewayGatewayOnlineServiceBrokerOSBrokerLogic}}, \iconcomponent{}~\vpett{\nameref{comp:GatewayGatewayOnlineServiceBroker}}
      \item[Required by:] \iconcomponent{}~\vpett{\nameref{comp:ApplicationClient}}, \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceApplicationManagerApplicationContainer}}, \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceApplicationManagerApplicationContainerManager}}, \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceApplicationFacade}}, \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceGatewayBrokerGWBrokerLogic}}, \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceGatewayBroker}}
      \item[Operations:] ~
    \begin{itemize}[noitemsep,nolistsep,leftmargin=-.25cm]
      \item \textsf{Map\textless{}\ref{data:DataTypesPluggableDeviceID}, List\textless{}void\textgreater{}\textgreater{} getDataForDevices(List\textless{}\ref{data:DataTypesPluggableDeviceID}\textgreater{} devices, \ref{data:DataTypesDateTime} from, \ref{data:DataTypesDateTime} to)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Returns DeviceData of pluggable devices over a specified time period.
\item Created for: UC24.1
        \end{itemize}
      \item \textsf{Map\textless{}\ref{data:DataTypesPluggableDeviceID}, List\textless{}void\textgreater{}\textgreater{} getDataForRoom(\ref{data:DataTypesRoomTopology} room, \ref{data:DataTypesDateTime} from, \ref{data:DataTypesDateTime} to)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Returns DeviceData of pluggable devices in a room over a specified time period.
\item Created for: UC24.1
        \end{itemize}
      \item \textsf{List\textless{}\ref{data:DataTypesRoomTopology}\textgreater{} getTopologyOverview(int applicationInstanceID, int customerOrganisationID)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Returns a list of RoomTopology containing devices that an ApplicationInstance has access to.
\item Created for: UC25.1
        \end{itemize}
    \end{itemize}
    \end{description}

  %%%%%%%% AppDeviceMgmt
  \subsection{AppDeviceMgmt}\label{int:GatewayGatewayDeviceManagerAppDeviceMgmt}
    \begin{description}[noitemsep,nolistsep]
      \item[Provided by:] \iconcomponent{}~\vpett{\nameref{comp:GatewayGatewayDeviceManager}}, \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceGatewayBrokerGWBrokerLogic}}, \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceGatewayBroker}}
      \item[Required by:] \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceApplicationManagerApplicationManagementLogic}}, \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceApplicationManager}}, \iconcomponent{}~\vpett{\nameref{comp:GatewayGatewayOnlineServiceBrokerOSBrokerLogic}}, \iconcomponent{}~\vpett{\nameref{comp:GatewayGatewayOnlineServiceBroker}}
      \item[Operations:] ~
    \begin{itemize}[noitemsep,nolistsep,leftmargin=-.25cm]
      \item \textsf{bool areEssentialDevicesOperational(int applicationID)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Returns true if all essential devices for the application with id "applicationID" are operational.
\item Created for: UC18
        \end{itemize}
      \item \textsf{boolean isDeviceInitialised(\ref{data:DataTypesPluggableDeviceID} pID)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Returns true if the device with id "pID" has been initialized.
\item Created for: UC11: pluggable device needs to be initialised, M1: pluggable device must be able to be initialised
\item TODO: need this check? is 'initialized' status stored in DB or on gateways? or both?
        \end{itemize}
      \item \textsf{void setPluggableDevicesRequirements(int applicationID, List\textless{}\ref{data:DataTypesPluggableDeviceInfo}\textgreater{} devices)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Sets an application's requirements for pluggable devices.
\item Created for: Av3: "Application providers can design their applications such that they explicitly require redundancy in the available pluggable devices." \\
TODO: update this with Relationship type?
        \end{itemize}
    \end{itemize}
    \end{description}

  %%%%%%%% AppInstanceMgmt
  \subsection{AppInstanceMgmt}\label{int:OnlineServiceOnlineServiceApplicationManagerApplicationContainerAppInstanceMgmt}
    \begin{description}[noitemsep,nolistsep]
      \item[Provided by:] \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceApplicationManagerApplicationContainer}}, \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceApplicationManagerApplicationContainerManager}}, \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceGatewayBrokerGWBrokerLogic}}, \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceGatewayBroker}}
      \item[Required by:] \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceApplicationManagerApplicationContainerManager}}, \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceApplicationManagerApplicationManagementLogic}}, \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceApplicationManager}}, \iconcomponent{}~\vpett{\nameref{comp:GatewayGatewayDeviceManager}}, \iconcomponent{}~\vpett{\nameref{comp:GatewayGatewayOnlineServiceBrokerOSBrokerLogic}}, \iconcomponent{}~\vpett{\nameref{comp:GatewayGatewayOnlineServiceBroker}}
      \item[Operations:] ~
    \begin{itemize}[noitemsep,nolistsep,leftmargin=-.25cm]
      \item \textsf{void activateApplicationInstance(int applicationInstanceID)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Activates an ApplicationInstance that is running on the gateway.
\item Created for: UC17.3, U2 - easy applications
        \end{itemize}
      \item \textsf{void deactivateApplicationInstance(int applicationInstanceID)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Deactivates a running instance of an application.
\item Created for: UC18, Av3: automatic suspension/reactivation of applications.
        \end{itemize}
      \item \textsf{boolean isApplicationInstanceAvailable(int applicationInstanceID)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Returns true if a certain ApplicationInstance is available.
\item Created for: UC27.2
        \end{itemize}
    \end{itemize}
    \end{description}

  %%%%%%%% AppMessages
  \subsection{AppMessages}\label{int:OnlineServiceOnlineServiceApplicationManagerApplicationContainerAppMessages}
    \begin{description}[noitemsep,nolistsep]
      \item[Provided by:] \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceApplicationManagerApplicationContainer}}, \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceApplicationManagerApplicationContainerManager}}, \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceApplicationManagerApplicationManagementLogic}}, \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceApplicationManager}}, \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceGatewayBrokerGWBrokerLogic}}, \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceGatewayBroker}}, \iconcomponent{}~\vpett{\nameref{comp:GatewayGatewayOnlineServiceBrokerOSBrokerLogic}}, \iconcomponent{}~\vpett{\nameref{comp:GatewayGatewayOnlineServiceBroker}}, \iconcomponent{}~\vpett{\nameref{comp:GatewayGatewayOnlineServiceBrokerRequestStore}}
      \item[Required by:] \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceApplicationManagerApplicationContainer}}, \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceApplicationManagerApplicationContainerManager}}, \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceApplicationManagerApplicationManagementLogic}}, \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceApplicationManager}}, \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceGatewayBrokerGWBrokerLogic}}, \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceGatewayBroker}}, \iconcomponent{}~\vpett{\nameref{comp:GatewayGatewayOnlineServiceBrokerOSBrokerLogic}}, \iconcomponent{}~\vpett{\nameref{comp:GatewayGatewayOnlineServiceBroker}}, \iconcomponent{}~\vpett{\nameref{comp:GatewayGatewayOnlineServiceBrokerRequestStore}}
      \item[Operations:] ~
    \begin{itemize}[noitemsep,nolistsep,leftmargin=-.25cm]
      \item \textsf{void applicationInstanceFailed(int applicationInstanceID, int onOnlineService)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Lets the other parts of an application know that one of their parts has become unavailable. This allowd the other parts to possibly run in a degraded mode. Is called by an \vpett{\nameref{comp:OnlineServiceOnlineServiceApplicationManagerApplicationContainer}} after its ApplicationInstance has crashed 3 times in a row.
\item Created for: Av1
        \end{itemize}
      \item \textsf{void sendCommandToApplicationInstance(int applicationInstanceID, string command, boolean forOnlineService) throws \ref{ex:DataTypesAppMessageNotAllowedException}}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Sends a command to an ApplicationInstance that is running on the Online Service or on a \vpett{\nameref{comp:GatewayGateway}}.
\item Created for: UC26.1
        \end{itemize}
      \item \textsf{void sendMessageToExternalFrontEnd(string hostName, int port, string message) throws \ref{ex:DataTypesAppMessageNotAllowedException}}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Sends a message from an ApplicationInstance to an external front end. The ApplicationInstance provides the hostname and port.
\item Created for: UC26.1
        \end{itemize}
    \end{itemize}
    \end{description}

  %%%%%%%% AppMonitoring
  \subsection{AppMonitoring}\label{int:OnlineServiceOnlineServiceApplicationManagerApplicationContainerAppMonitoring}
    \begin{description}[noitemsep,nolistsep]
      \item[Provided by:] \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceApplicationManagerApplicationContainer}}, \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceApplicationManagerApplicationContainerManager}}
      \item[Required by:] \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceApplicationManagerApplicationContainerManager}}, \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceApplicationManagerApplicationContainerMonitor}}
      \item[Operations:] ~
    \begin{itemize}[noitemsep,nolistsep,leftmargin=-.25cm]
      \item \textsf{\ref{data:DataTypesEcho} pingApplicationInstance(int applicationInstanceID)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Sends a ping request to an \vpett{\nameref{comp:OnlineServiceOnlineServiceApplicationManagerApplicationContainer}}. The \vpett{\nameref{comp:OnlineServiceOnlineServiceApplicationManagerApplicationContainer}} should respond with an Echo reply. The monitor uses this to check whether or not the container is still available.
\item Created for: The system is able to autonomously detect failures of its individual failing applications.
        \end{itemize}
    \end{itemize}
    \end{description}

  %%%%%%%% AppStatus
  \subsection{AppStatus}\label{int:OnlineServiceOnlineServiceApplicationManagerApplicationContainerMonitorAppStatus}
    \begin{description}[noitemsep,nolistsep]
      \item[Provided by:] \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceApplicationManagerApplicationContainerMonitor}}
      \item[Required by:] \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceApplicationManagerApplicationContainer}}, \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceApplicationManagerApplicationContainerManager}}
      \item[Operations:] ~
    \begin{itemize}[noitemsep,nolistsep,leftmargin=-.25cm]
      \item \textsf{boolean isApplicationInstanceAvailable(int applicationInstanceID)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Returns true if a certain ApplicationInstance is available.
\item Created for: UC27.2
        \end{itemize}
      \item \textsf{void updateApplicationActive(int applicationInstanceID)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Updates an ApplicationInstance's status to 'active'.
        \end{itemize}
      \item \textsf{void updateApplicationInstanceSuspended(int applicationInstanceID)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Updates an ApplicationInstance's status to 'suspended'.
        \end{itemize}
      \item \textsf{void updateApplicationStatusUnavailable(int applicationInstanceID)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Effect: Notifies the \vpett{\nameref{comp:OnlineServiceOnlineServiceApplicationManagerApplicationContainerMonitor}} that an ApplicationInstance has crashed.
\item Created for: Av2 - The system is able to autonomously detect failing applications
        \end{itemize}
    \end{itemize}
    \end{description}

  %%%%%%%% Commands
  \subsection{Commands}\label{int:OnlineServiceOnlineServiceApplicationManagerDeviceCommandConstructorCommands}
    \begin{description}[noitemsep,nolistsep]
      \item[Provided by:] \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceApplicationManagerApplicationContainerManager}}, \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceApplicationManagerDeviceCommandConstructor}}
      \item[Required by:] \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceApplicationManagerApplicationContainerManager}}, \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceApplicationManagerApplicationManagementLogic}}
      \item[Operations:] ~
    \begin{itemize}[noitemsep,nolistsep,leftmargin=-.25cm]
      \item \textsf{void sendActuationCommand(List\textless{}\ref{data:DataTypesPluggableDeviceID}\textgreater{} device, string commandName) throws \ref{ex:DataTypesUnknownCommandException}}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Sends a command for a list of actuators to \vpett{\nameref{comp:OnlineServiceOnlineServiceApplicationManagerDeviceCommandConstructor}} for construction of actuation command messages according to the specific formatting syntax for the given actuators. The given command 'commandName' is a command that application developers use for a group of devices.
\item Created for: UC12 - commands from applications
        \end{itemize}
      \item \textsf{void verifyAndConstructConfigurationsForDevice(\ref{data:DataTypesPluggableDeviceID} pID, Map\textless{}string, string\textgreater{} config) throws \ref{ex:DataTypesUnknownConfigurationParameterException}}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Verifies the configuration parameters for a pluggable device. If the parameters have been successfuly verified, constructs a reconfiguration command according to the specific formatting syntax for the pluggable device and sends it to the \vpett{\nameref{comp:GatewayGatewayDeviceManager}} if everything is correct.
\item Created for: UC13.2-3
        \end{itemize}
    \end{itemize}
    \end{description}

  %%%%%%%% Config
  \subsection{Config}\label{int:PuggableDevicePluggableDeviceConfig}
    \begin{description}[noitemsep,nolistsep]
      \item[Provided by:] \iconcomponent{}~\vpett{\nameref{comp:PuggableDevicePluggableDevice}}
      \item[Required by:] \iconcomponent{}~\vpett{\nameref{comp:MoteMote}}
      \item[Operations:] ~
    \begin{itemize}[noitemsep,nolistsep,leftmargin=-.25cm]
      \item \textsf{Map\textless{}String, String\textgreater{} getConfig()}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Returns the current configuration of a pluggable device as a parameter-value map.
        \end{itemize}
      \item \textsf{boolean setConfig(void Map<string, string>)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Set the given configuration parameters of the pluggable device to the given values. Setting unknown parameters on a pluggable device (e.g., 'noise threshold' -> '3' on a light sensor) has no effect.
\item Created for: Given constraint, UC11: pluggable device needs to be initialised, M1: pluggable device must be able to be initialised
        \end{itemize}
    \end{itemize}
    \end{description}

  %%%%%%%% Config
  \subsection{Config}\label{int:MoteMoteConfig}
    \begin{description}[noitemsep,nolistsep]
      \item[Provided by:] \iconcomponent{}~\vpett{\nameref{comp:MoteMote}}
      \item[Required by:] \iconcomponent{}~\vpett{\nameref{comp:GatewayGatewayDeviceManager}}, \iconcomponent{}~\vpett{\nameref{comp:GatewayGateway}}
      \item[Operations:] ~
    \begin{itemize}[noitemsep,nolistsep,leftmargin=-.25cm]
      \item \textsf{Map\textless{}String, String\textgreater{} getConfig(\ref{data:DataTypesPluggableDeviceID} pID)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Returns the current configuration of a pluggable device as a parameter-value map.
        \end{itemize}
      \item \textsf{boolean setConfig(\ref{data:DataTypesPluggableDeviceID} pID, Map\textless{}string, string\textgreater{} config)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Set the given configuration parameters of the pluggable device to the given values. Setting unknown parameters on a pluggable device (e.g., 'noise threshold' -> '3' on a light sensor) has no effect.
\item Created for: Given constraint, UC11: pluggable device needs to be initialised, M1: pluggable device must be able to be initialised
        \end{itemize}
    \end{itemize}
    \end{description}

  %%%%%%%% DataConversion
  \subsection{DataConversion}\label{int:OnlineServiceOnlineServiceApplicationManagerDeviceDataConverterDataConversion}
    \begin{description}[noitemsep,nolistsep]
      \item[Provided by:] \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceApplicationManagerDeviceDataConverter}}
      \item[Required by:] \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceApplicationManagerApplicationContainer}}
      \item[Operations:] ~
    \begin{itemize}[noitemsep,nolistsep,leftmargin=-.25cm]
      \item \textsf{\ref{data:DataTypesDeviceData} convert(\ref{data:DataTypesDeviceData} data, string targetType)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Converts pluggable device data into other pluggable device data that contains the same information in a different measurement type.
\item Created for: M1: data processing subsystem should be extended with relevant data conversions
        \end{itemize}
    \end{itemize}
    \end{description}

  %%%%%%%% DBAccessRightsMgmt
  \subsection{DBAccessRightsMgmt}\label{int:DeviceDatabaseDeviceDBDBAccessRightsMgmt}
    \begin{description}[noitemsep,nolistsep]
      \item[Provided by:] \iconcomponent{}~\vpett{\nameref{comp:DeviceDatabaseDeviceDB}}
      \item[Required by:] \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceAccessRightsManager}}
      \item[Operations:] ~
    \begin{itemize}[noitemsep,nolistsep,leftmargin=-.25cm]
      \item \textsf{ getCustomerOrganisationsRights(\ref{data:DataTypesPluggableDeviceID} pID, List\textless{}int\textgreater{} custOrgIDs)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Returns a map of AccessRights and the IDs of customer organisations that have those AccessRights on a certain pluggable device.
\item Created for: UC9.4
        \end{itemize}
      \item \textsf{void updateAccessRights()}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Updates the access rights on a certain pluggable device for a group of customer organisations.
\item Created for: UC9.7
        \end{itemize}
    \end{itemize}
    \end{description}

  %%%%%%%% DBAppDeviceMgmt
  \subsection{DBAppDeviceMgmt}\label{int:DeviceDatabaseDeviceDBDBAppDeviceMgmt}
    \begin{description}[noitemsep,nolistsep]
      \item[Provided by:] \iconcomponent{}~\vpett{\nameref{comp:DeviceDatabaseDeviceDB}}
      \item[Required by:] \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceApplicationManager}}, \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceApplicationManagerDeviceCommandConstructor}}
      \item[Operations:] ~
    \begin{itemize}[noitemsep,nolistsep,leftmargin=-.25cm]
      \item \textsf{Map\textless{}\ref{data:DataTypesPluggableDeviceID}, string\textgreater{} getFormattingSyntaxForDevices(List\textless{}\ref{data:DataTypesPluggableDeviceID}\textgreater{} devices)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Retrieves the specific formatting syntax for a list of pluggable devices.
\item Created for: UC12.2-3
        \end{itemize}
      \item \textsf{Map\textless{}\ref{data:DataTypesPluggableDeviceID}, \ref{data:DataTypesGatewayInfo}\textgreater{} getGatewaysForDevices(List\textless{}\ref{data:DataTypesPluggableDeviceID}\textgreater{} devices)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Returns a map of PluggableDevices with the gateways they are connected to.
\item Created for: UC12.2
        \end{itemize}
      \item \textsf{string getPossibleConfigurationParametersForDevice(\ref{data:DataTypesPluggableDeviceID} pID)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Retrieves the possible configuration parameters for a pluggable device.
\item Created for: UC13.2
        \end{itemize}
    \end{itemize}
    \end{description}

  %%%%%%%% DBAppMgmt
  \subsection{DBAppMgmt}\label{int:OtherDataDatabaseOtherDataDBDBAppMgmt}
    \begin{description}[noitemsep,nolistsep]
      \item[Provided by:] \iconcomponent{}~\vpett{\nameref{comp:OtherDataDatabaseOtherDataDB}}
      \item[Required by:] \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceApplicationManagerApplicationManagementLogic}}, \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceApplicationManager}}
      \item[Operations:] ~
    \begin{itemize}[noitemsep,nolistsep,leftmargin=-.25cm]
      \item \textsf{void activateApplication(int applicationInstanceID, string status)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Sets an ApplicationInstance's status in the \vpett{\nameref{comp:OtherDataDatabaseOtherDataDB}} to 'active'.
\item Created for: UC17.4, U2 - easy applications
        \end{itemize}
      \item \textsf{int createNewApplicationInstance(int custOrgID, int applicationID)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Creates a new ApplicationInstance for an application for a customer organisation and returns its id.
\item Created for: UC19.4, U2 - easy applications
        \end{itemize}
      \item \textsf{\ref{data:DataTypesGatewayInfo} getApplicationIstanceGateway()}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Returns information about a gateway that an application instance is running on.
\item  Created for: Av2 - Need to know which gateways to send messages to for e.g. application commands.
        \end{itemize}
      \item \textsf{List\textless{}\ref{data:DataTypesApplication}\textgreater{} getApplications()}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Returns a list of applications in the system.
\item Created for: UC19.2, U2 - easy applications
        \end{itemize}
      \item \textsf{List\textless{}int\textgreater{} getApplicationsForDevice()}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Returns a list of applications that can use the device with id "pID".
\item Created for: UC11: the system looks up the list of applications that use the pluggable device
        \end{itemize}
      \item \textsf{List\textless{}\ref{data:DataTypesPluggableDeviceID}\textgreater{} getDevicesForApplication(int applicationInstanceID)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Returns a list of PluggableDeviceID of pluggable devices that an ApplicationInstance can use.
\item Created for: UC17.2, U2 - easy applications
        \end{itemize}
      \item \textsf{string getInstallationInstructions(int applicationID)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Returns the installation instructions of a certain application. If there are no installation instructions set, returns an empty string.
\item Created for: UC17.6, U2 - easy applications
        \end{itemize}
      \item \textsf{List\textless{}\ref{data:DataTypesRoomTopology}\textgreater{} getNecessaryDevicesAndTopologyConfigurations(int applicationID)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Returns a list of RoomTopology which is a minimal requirement for a certain application to run. This can used to display the requirements to a user or to check if requirements are fulfilled.
\item Created for: UC19.5, U2 - easy applications
        \end{itemize}
      \item \textsf{void updateApplication(\ref{data:DataTypesApplicationInstance} instance)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Updates an application in the database (e.g. change state to 'inactive').
\item Created for: UC18, Av3: automatic suspension/reactivation of applications.
        \end{itemize}
      \item \textsf{void updateApplicationDevicesSettings(int applicationInstanceID, List\textless{}\ref{data:DataTypesPluggableDeviceID}\textgreater{} devices, List\textless{}\ref{data:DataTypesRelationship}\textgreater{} relationships)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Updates an ApplicationInstance's device settings. This includes which devices the instance can use and which relationships exist between those devices.
\item Created for: UC19.6, U2 - easy applications
        \end{itemize}
      \item \textsf{void updateApplicationInstanceGateway(int applicationInstanceID, int gatewayID)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Updates the gateway on which an application instance is running.
\item Created for: Av2 - Need to know which gateways to send messages to for e.g. application commands.
        \end{itemize}
      \item \textsf{void updateCriticality(int applicationInstanceID, int isCritical)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Updates the criticality of an ApplicationInstance.
\item Created for: UC19.11, U2 - easy applications
        \end{itemize}
      \item \textsf{void updateSubscription(\ref{data:DataTypesSubscription} subscription)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Updates a subscription in the database (e.g. change state to 'disabled').
\item Created for: UC18
        \end{itemize}
    \end{itemize}
    \end{description}

  %%%%%%%% DBDeviceData
  \subsection{DBDeviceData}\label{int:PluggableDeviceDatabasePluggableDeviceDataDBDBDeviceData}
    \begin{description}[noitemsep,nolistsep]
      \item[Provided by:] \iconcomponent{}~\vpett{\nameref{comp:PluggableDeviceDatabasePluggableDeviceDataDB}}
      \item[Required by:] \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceDeviceDataScheduler}}
      \item[Operations:] ~
    \begin{itemize}[noitemsep,nolistsep,leftmargin=-.25cm]
      \item \textsf{List\textless{}\ref{data:DataTypesDeviceData}\textgreater{} getData(\ref{data:DataTypesPluggableDeviceID} pID, \ref{data:DataTypesDateTime} from, \ref{data:DataTypesDateTime} to)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Returns data from a specific device in a certain time period.
\item Created for: P2: lookup queries
        \end{itemize}
      \item \textsf{ getDataForDevices(List\textless{}\ref{data:DataTypesPluggableDeviceID}\textgreater{} devices, \ref{data:DataTypesDateTime} from, \ref{data:DataTypesDateTime} to)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Returns DeviceData of pluggable devices over a specified time period.
\item Created for: UC24.2
        \end{itemize}
      \item \textsf{void rcvData(\ref{data:DataTypesPluggableDeviceID} pID, \ref{data:DataTypesDeviceData} data)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Sends pluggable device data to the DB to be stored.
\item Created for: UC11, P2: storing new pluggable data
        \end{itemize}
    \end{itemize}
    \end{description}

  %%%%%%%% DBDeviceMgmt
  \subsection{DBDeviceMgmt}\label{int:DeviceDatabaseDeviceDBDBDeviceMgmt}
    \begin{description}[noitemsep,nolistsep]
      \item[Provided by:] \iconcomponent{}~\vpett{\nameref{comp:DeviceDatabaseDeviceDB}}, \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceGatewayBrokerGWBrokerLogic}}, \iconcomponent{}~\vpett{\nameref{comp:GatewayGatewayOnlineServiceBrokerOSBrokerLogic}}, \iconcomponent{}~\vpett{\nameref{comp:GatewayGatewayOnlineServiceBroker}}
      \item[Required by:] \iconcomponent{}~\vpett{\nameref{comp:GatewayGatewayDeviceManager}}, \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceGatewayBrokerGWBrokerLogic}}, \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceGatewayBroker}}, \iconcomponent{}~\vpett{\nameref{comp:GatewayBrokerMonitor}}, \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceGatewayBrokerGatewayMonitor}}
      \item[Operations:] ~
    \begin{itemize}[noitemsep,nolistsep,leftmargin=-.25cm]
      \item \textsf{void addDevice(\ref{data:DataTypesPluggableDeviceID} pID, \ref{data:DataTypesPluggableDeviceType} type, Map\textless{}string, string\textgreater{} configurations, int moteID)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Adds a new pluggable device in the \vpett{\nameref{comp:DeviceDatabaseDeviceDB}} and adds a reference to a mote. The device's status is 'uninitialised' by default and it's current configurations (which are now the default configurations) are stored as well. If the device already exists, removes the data first (in case the device is plugged into a different mote or on a different network).
\item Created for: UC6.3, U2 - easy pluggable device installation
        \end{itemize}
      \item \textsf{int addMote(\ref{data:DataTypesMoteInfo} mote, int gatewayID, \ref{data:DataTypesIPAddress} moteIPAddress)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Adds a new mote in the \vpett{\nameref{comp:DeviceDatabaseDeviceDB}} along with an IP address and a reference to a gateway. Returns the DB id for the mote.
\item Created for: UC4.3, U2 - easy mote installation
        \end{itemize}
      \item \textsf{Map\textless{}string, string\textgreater{} getConfigDB(\ref{data:DataTypesPluggableDeviceID} pID)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Gets the last set configurations of a pluggable device from the \vpett{\nameref{comp:DeviceDatabaseDeviceDB}}.
\item Created for: UC6.3 - reintroduced device
        \end{itemize}
      \item \textsf{double getPercentageOfGatewaysUnreachable()}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Returns the percentage of deployed gateways that have status 'unreachable'.
\item Created for: Av1 - A SIoTIP system administrator should be notified of a simultaneous outage of more than 1\% of the registered gateways.
        \end{itemize}
      \item \textsf{Map\textless{}string, string\textgreater{} getPluggableDeviceData(\ref{data:DataTypesPluggableDeviceID} pID)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Effect: Returns all data about a pluggable device in the \vpett{\nameref{comp:DeviceDatabaseDeviceDB}}, such as status, type information, specific formatting syntax (for applications), etc.
\item Created for: UC12 - construction of commands, UC13 - verification of configuration parameters
        \end{itemize}
      \item \textsf{void reactivateDevice(\ref{data:DataTypesPluggableDeviceID} pID)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Changes the status of a pluggable device to 'active'.
\item Created for: UC6.3 - reintroduced device
        \end{itemize}
      \item \textsf{void reactivateMote(int moteID)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Changes the status of the mote with DB id 'moteID' to 'active'.
\item Created for: U2 - Reintroducing a previously known mote should not require any conguration.
        \end{itemize}
      \item \textsf{void registerGateway(int gatewayID, \ref{data:DataTypesIPAddress} address)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Sets a gateway's status to 'active' and updates its IP address.
\item Created for: U2 - gateway installation
        \end{itemize}
      \item \textsf{void updateGatewayStatus(int gatewayID)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Changes a gateway's status.
\item Created for: Av1 - Connectivity of gateways
        \end{itemize}
    \end{itemize}
    \end{description}

  %%%%%%%% DBInvoiceMgmt
  \subsection{DBInvoiceMgmt}\label{int:OtherDataDatabaseOtherDataDBDBInvoiceMgmt}
    \begin{description}[noitemsep,nolistsep]
      \item[Provided by:] \iconcomponent{}~\vpett{\nameref{comp:OtherDataDatabaseOtherDataDB}}
      \item[Required by:] \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceInvoiceManager}}
      \item[Operations:] ~
    \begin{itemize}[noitemsep,nolistsep,leftmargin=-.25cm]
      \item \textsf{void markActivatedApplication(int applicationInstanceID, int custOrgID, \ref{data:DataTypesDateTime} date)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Updates an ApplicationInstance's billing information: marks the start of a billing period.
\item Created for: UC17.4, U2 - easy applications
        \end{itemize}
    \end{itemize}
    \end{description}

  %%%%%%%% DBIODeviceMgmt
  \subsection{DBIODeviceMgmt}\label{int:DeviceDatabaseDeviceDBDBIODeviceMgmt}
    \begin{description}[noitemsep,nolistsep]
      \item[Provided by:] \iconcomponent{}~\vpett{\nameref{comp:DeviceDatabaseDeviceDB}}
      \item[Required by:] \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceInfrastructureOwnerManager}}
      \item[Operations:] ~
    \begin{itemize}[noitemsep,nolistsep,leftmargin=-.25cm]
      \item \textsf{List\textless{}\ref{data:DataTypesPluggableDeviceInfo}\textgreater{} getDevices(int infrastructureOwnerID)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Returns a list of PluggableDeviceInfo of devices owned by an infrastructure owner.
\item Created for: UC9.2
        \end{itemize}
    \end{itemize}
    \end{description}

  %%%%%%%% DBIOMgmt
  \subsection{DBIOMgmt}\label{int:OtherDataDatabaseOtherDataDBDBIOMgmt}
    \begin{description}[noitemsep,nolistsep]
      \item[Provided by:] \iconcomponent{}~\vpett{\nameref{comp:OtherDataDatabaseOtherDataDB}}
      \item[Required by:] \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceInfrastructureOwnerManager}}
      \item[Operations:] ~
    \begin{itemize}[noitemsep,nolistsep,leftmargin=-.25cm]
      \item \textsf{List\textless{}int\textgreater{} getCustomerOrganisations(int infrastructureOwnerID)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Returns a list of IDs of all customer organisations associated with an infrastructure owner.
\item Created for: UC9.4
        \end{itemize}
    \end{itemize}
    \end{description}

  %%%%%%%% DBNotificationMgmt
  \subsection{DBNotificationMgmt}\label{int:OtherDataDatabaseOtherDataDBDBNotificationMgmt}
    \begin{description}[noitemsep,nolistsep]
      \item[Provided by:] \iconcomponent{}~\vpett{\nameref{comp:OtherDataDatabaseOtherDataDB}}
      \item[Required by:] \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceNotificationHandler}}
      \item[Operations:] ~
    \begin{itemize}[noitemsep,nolistsep,leftmargin=-.25cm]
      \item \textsf{int lookupNotificationChannelForUser()}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Returns the id of the type of communication channel a user prefers.
\item Created for: UC15
        \end{itemize}
      \item \textsf{int storeNotification(\ref{data:DataTypesNotification} notification)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Stores a new notification entry in the database. Returns the id of the new notification. \\
\item Created for: UC15, Av3: notifications
        \end{itemize}
      \item \textsf{int updateNotification(\ref{data:DataTypesNotification} notification)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Updates an existing notification (e.g. change status to "sent").
\item Created for: UC15
        \end{itemize}
    \end{itemize}
    \end{description}

  %%%%%%%% DBSubscriptionMgmt
  \subsection{DBSubscriptionMgmt}\label{int:OtherDataDatabaseOtherDataDBDBSubscriptionMgmt}
    \begin{description}[noitemsep,nolistsep]
      \item[Provided by:] \iconcomponent{}~\vpett{\nameref{comp:OtherDataDatabaseOtherDataDB}}
      \item[Required by:] \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceSubscriptionManager}}
      \item[Operations:] ~
    \begin{itemize}[noitemsep,nolistsep,leftmargin=-.25cm]
      \item \textsf{void createSubscription(int custOrgID, int applicationInstanceID)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Creates a subscription for a customer organisation to an ApplicationInstance. If the customer organisation is already subscribed to an older version of the the application, then the organisation is unsubscribed from that earlier version.
\item Created for: UC19.12-13, U2 - easy applications
        \end{itemize}
      \item \textsf{List\textless{}\ref{data:DataTypesSubscription}\textgreater{} getSubscriptions(int custOrgID)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Returns a list of subscriptions a customer organisation has.
\item Created for: UC19.2, U2 - easy applications
        \end{itemize}
    \end{itemize}
    \end{description}

  %%%%%%%% DBTopologyMgmt
  \subsection{DBTopologyMgmt}\label{int:DeviceDatabaseDeviceDBDBTopologyMgmt}
    \begin{description}[noitemsep,nolistsep]
      \item[Provided by:] \iconcomponent{}~\vpett{\nameref{comp:DeviceDatabaseDeviceDB}}
      \item[Required by:] \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceTopologyManager}}
      \item[Operations:] ~
    \begin{itemize}[noitemsep,nolistsep,leftmargin=-.25cm]
      \item \textsf{void addDevice(\ref{data:DataTypesPluggableDeviceID} pID, int moteID)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Adds a new pluggable device to the topology of the infrastructure owner and links it to a mote. The device gets the mote's location by default. If the device is already linked to another mote, overwrites that link.
\item Created for: UC6.3, U2 - easy pluggable device installation
        \end{itemize}
      \item \textsf{void addMote(int moteID, int infrastructureOwnerID, int gatewayID)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Adds a new mote to a topology of an infrastructure owner. The mote is linked to a gateway and gets status 'unplaced' by default.
\item Created for: UC4.3, U2 - easy mote installation
        \end{itemize}
      \item \textsf{boolean arePluggableDevicesPlaced(List\textless{}\ref{data:DataTypesPluggableDeviceID}\textgreater{} devices)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Returns true if all pluggable devices in the given list have status 'placed' in the topology.
\item Created for: UC17.2, U2 - easy applications
        \end{itemize}
      \item \textsf{List\textless{}\ref{data:DataTypesRoomTopology}\textgreater{} getTopology(int custOrgID)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Returns a list of RoomTopology associated to a customer organisation.
\item Created for: UC19.5, U2 - easy applications
        \end{itemize}
      \item \textsf{void reactivateDevice(\ref{data:DataTypesPluggableDeviceID} id)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Changes the status of a pluggable device in the topology to 'placed'.
\item Created for: UC6.3 - reintroduced device
        \end{itemize}
      \item \textsf{void reactivateMote(int moteID)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Changes the status of the mote in the topology to 'placed'. The location of the mote is unchanged, it has already been set.
\item Created for: U2 - Reintroducing a previously known mote should not require any conguration.
        \end{itemize}
    \end{itemize}
    \end{description}

  %%%%%%%% DBUserRoleMgmt
  \subsection{DBUserRoleMgmt}\label{int:OtherDataDatabaseOtherDataDBDBUserRoleMgmt}
    \begin{description}[noitemsep,nolistsep]
      \item[Provided by:] \iconcomponent{}~\vpett{\nameref{comp:OtherDataDatabaseOtherDataDB}}
      \item[Required by:] \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceUserRolesManager}}
      \item[Operations:] ~
    \begin{itemize}[noitemsep,nolistsep,leftmargin=-.25cm]
      \item \textsf{boolean areMandatoryUserRolesAssigned(int applicationInstanceID)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Returns true if all mandatory UserRoles for the application have been assigned to users. Finds the relevant customer organisations through the ApplicationInstance.
\item Created for: UC17.1, U2 - easy applications
        \end{itemize}
      \item \textsf{List\textless{}\ref{data:DataTypesUser}\textgreater{} getEndUsers(int custOrgID)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Returns a list of Users which are associated to a customer organisation.
\item Created for: UC19.8, U2 - easy applications
        \end{itemize}
      \item \textsf{List\textless{}\ref{data:DataTypesUserRole}\textgreater{} getMandatoryUserRoles(int applicationID)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Returns a list of UserRoles that which need to be assigned in order for an ApplicationInstance to run.
\item Created for: UC19.7, U2 - easy applications
        \end{itemize}
      \item \textsf{List\textless{}\ref{data:DataTypesUserRole}\textgreater{} getOptionalUserRoles(int applicationID)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Returns a list of UserRoles which can optionally be assigned for an ApplicationInstance.
\item Created for: UC19.7, U2 - easy applications
        \end{itemize}
      \item \textsf{List\textless{}\ref{data:DataTypesUser}\textgreater{} getUsersWithRoles(int applicationInstanceID)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Returns a list of Users associated to an ApplicationInstance that were assigned UserRoles.
\item Created for: UC17.6, U2 - easy applications
        \end{itemize}
      \item \textsf{void updateUserRoles(int applicationInstanceID, Map\textless{}int, int\textgreater{} usersAndRoles)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Updates the UserRoles assigned to Users for a certain ApplicationInstance. 'usersAndRoles' maps User IDs to UserRole IDs.
\item Created for: UC19.9, U2 - easy applications
        \end{itemize}
    \end{itemize}
    \end{description}

  %%%%%%%% DeliveryMgmt
  \subsection{DeliveryMgmt}\label{int:OnlineServiceOnlineServiceNotificationHandlerDeliveryMgmt}
    \begin{description}[noitemsep,nolistsep]
      \item[Provided by:] \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceNotificationHandler}}
      \item[Required by:] \iconcomponent{}~\vpett{\nameref{comp:NotificationDeliveryServiceNodeNotificationDeliveryService}}
      \item[Operations:] ~
    \begin{itemize}[noitemsep,nolistsep,leftmargin=-.25cm]
      \item \textsf{void acknowledgement(int notificationID)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Sends an acknowledgement to the system for a certain notification to denote that a notification has been received.
\item Created for: UC15
        \end{itemize}
    \end{itemize}
    \end{description}

  %%%%%%%% DeviceCommands
  \subsection{DeviceCommands}\label{int:GatewayGatewayDeviceManagerDeviceCommands}
    \begin{description}[noitemsep,nolistsep]
      \item[Provided by:] \iconcomponent{}~\vpett{\nameref{comp:GatewayGatewayDeviceManager}}, \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceGatewayBrokerGWBrokerLogic}}, \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceGatewayBroker}}
      \item[Required by:] \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceApplicationManager}}, \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceApplicationManagerDeviceCommandConstructor}}, \iconcomponent{}~\vpett{\nameref{comp:GatewayGatewayOnlineServiceBrokerOSBrokerLogic}}, \iconcomponent{}~\vpett{\nameref{comp:GatewayGatewayOnlineServiceBroker}}
      \item[Operations:] ~
    \begin{itemize}[noitemsep,nolistsep,leftmargin=-.25cm]
      \item \textsf{Map\textless{}\ref{data:DataTypesPluggableDeviceID}, string\textgreater{} getFormattingSyntaxForDevices(List\textless{}\ref{data:DataTypesPluggableDeviceID}\textgreater{} devices)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Retrieves the specific formatting syntax for a list of pluggable devices from the \vpett{\nameref{comp:GatewayGatewayDeviceManager}}. Used by the \vpett{\nameref{comp:OnlineServiceOnlineServiceApplicationManagerDeviceCommandConstructor}} on Gateways.
\item Created for: UC12 - commands from applications on gateways
        \end{itemize}
      \item \textsf{string getPossibleConfigurationParametersForDevice(\ref{data:DataTypesPluggableDeviceID} pID)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Retrieves the possible configuration parameters for a pluggable device. Used by the \vpett{\nameref{comp:OnlineServiceOnlineServiceApplicationManagerDeviceCommandConstructor}} on Gateways.
\item Created for: UC13 - configuration commands from applications on gateways
        \end{itemize}
      \item \textsf{void sendActuationCommand(Map\textless{}\ref{data:DataTypesPluggableDeviceID}, string\textgreater{} commandsForDevices)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Sends correctly constructed actuation commands for a group of actuators to the \vpett{\nameref{comp:GatewayGatewayDeviceManager}} on a \vpett{\nameref{comp:GatewayGateway}}.
\item Created for: UC12 - send command message to the intended actuators
        \end{itemize}
      \item \textsf{void setConfiguration(\ref{data:DataTypesPluggableDeviceID} pID, Map\textless{}string, string\textgreater{} config)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Sets configuration parameters of a pluggable device. The \vpett{\nameref{comp:GatewayGatewayDeviceManager}} first determines whether the pluggable device needs to be reconfigured. To do this, it checks the data it has about configurations set by other applications on the pluggable device. If the device can be reconfigured, then the configuration command is propagated to the pluggable device.
\item Created for: UC13.3
        \end{itemize}
    \end{itemize}
    \end{description}

  %%%%%%%% DeviceCommands
  \subsection{DeviceCommands}\label{int:OnlineServiceOnlineServiceApplicationManagerApplicationManagementLogicDeviceCommands}
    \begin{description}[noitemsep,nolistsep]
      \item[Provided by:] \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceApplicationManagerApplicationContainerManager}}, \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceApplicationFacade}}, \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceApplicationManagerApplicationManagementLogic}}, \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceApplicationManager}}
      \item[Required by:] \iconcomponent{}~\vpett{\nameref{comp:ApplicationClient}}, \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceApplicationManagerApplicationContainer}}, \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceApplicationFacade}}
      \item[Operations:] ~
    \begin{itemize}[noitemsep,nolistsep,leftmargin=-.25cm]
      \item \textsf{void sendActuationCommand(List\textless{}\ref{data:DataTypesPluggableDeviceID}\textgreater{} devices, string command)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Sends a command for a list of actuators for construction of the actuation command messages.
\item Created for: UC12.1
        \end{itemize}
      \item \textsf{void setConfiguration(\ref{data:DataTypesPluggableDeviceID} pID, Map\textless{}string, string\textgreater{} config)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Sends a configuration command for a pluggable device for construction of the actual command messages.
\item Created for: UC13.1
        \end{itemize}
    \end{itemize}
    \end{description}

  %%%%%%%% DeviceData
  \subsection{DeviceData}\label{int:OnlineServiceOnlineServiceDeviceDataSchedulerDeviceData}
    \begin{description}[noitemsep,nolistsep]
      \item[Provided by:] \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceDeviceDataScheduler}}, \iconcomponent{}~\vpett{\nameref{comp:GatewayGatewayOnlineServiceBrokerOSBrokerLogic}}, \iconcomponent{}~\vpett{\nameref{comp:GatewayGatewayOnlineServiceBroker}}, \iconcomponent{}~\vpett{\nameref{comp:GatewayGatewayOnlineServiceBrokerRequestStore}}
      \item[Required by:] \iconcomponent{}~\vpett{\nameref{comp:GatewayGatewayDeviceManager}}, \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceGatewayBrokerGWBrokerLogic}}, \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceGatewayBroker}}, \iconcomponent{}~\vpett{\nameref{comp:GatewayGatewayOnlineServiceBrokerRequestStore}}
      \item[Operations:] ~
    \begin{itemize}[noitemsep,nolistsep,leftmargin=-.25cm]
      \item \textsf{void rcvData(\ref{data:DataTypesPluggableDeviceID} pID, \ref{data:DataTypesDeviceData} data)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Sends pluggable device data to the scheduler to be processed.
\item Created for: UC11, P2: storing new pluggable data
        \end{itemize}
    \end{itemize}
    \end{description}

  %%%%%%%% DeviceData
  \subsection{DeviceData}\label{int:GatewayGatewayDeviceManagerDeviceData}
    \begin{description}[noitemsep,nolistsep]
      \item[Provided by:] \iconcomponent{}~\vpett{\nameref{comp:GatewayGatewayDeviceManager}}, \iconcomponent{}~\vpett{\nameref{comp:GatewayGateway}}, \iconcomponent{}~\vpett{\nameref{comp:MoteMote}}
      \item[Required by:] \iconcomponent{}~\vpett{\nameref{comp:MoteMote}}, \iconcomponent{}~\vpett{\nameref{comp:PuggableDevicePluggableDevice}}
      \item[Operations:] ~
    \begin{itemize}[noitemsep,nolistsep,leftmargin=-.25cm]
      \item \textsf{void rcvData(\ref{data:DataTypesPluggableDeviceID} pID, \ref{data:DataTypesDeviceData} data)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Provides pluggable device data to the gateway (Initiated by the device).
        \end{itemize}
      \item \textsf{void rcvDataCallback(\ref{data:DataTypesPluggableDeviceID} pID, \ref{data:DataTypesDeviceData} data, int requestID)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Provides device data to the gateway (Callback of getDataAsync).
        \end{itemize}
    \end{itemize}
    \end{description}

  %%%%%%%% DeviceMgmt
  \subsection{DeviceMgmt}\label{int:GatewayGatewayDeviceManagerDeviceMgmt}
    \begin{description}[noitemsep,nolistsep]
      \item[Provided by:] \iconcomponent{}~\vpett{\nameref{comp:GatewayGatewayDeviceManager}}, \iconcomponent{}~\vpett{\nameref{comp:GatewayGateway}}
      \item[Required by:] \iconcomponent{}~\vpett{\nameref{comp:MoteMote}}
      \item[Operations:] ~
    \begin{itemize}[noitemsep,nolistsep,leftmargin=-.25cm]
      \item \textsf{void pluggableDevicePluggedIn(\ref{data:DataTypesMoteInfo} mInfo, \ref{data:DataTypesPluggableDeviceID} pID, \ref{data:DataTypesPluggableDeviceType} type)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Notify the gateway that a new \vpett{\nameref{comp:PuggableDevicePluggableDevice}} of the given type is connected
to the mote.
        \end{itemize}
      \item \textsf{void pluggableDeviceRemoved(\ref{data:DataTypesPluggableDeviceID} pID)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Notify the gateway that a \vpett{\nameref{comp:PuggableDevicePluggableDevice}} is removed.
        \end{itemize}
    \end{itemize}
    \end{description}

  %%%%%%%% ForwardData
  \subsection{ForwardData}\label{int:OnlineServiceOnlineServiceApplicationManagerApplicationManagementLogicForwardData}
    \begin{description}[noitemsep,nolistsep]
      \item[Provided by:] \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceApplicationManagerApplicationManagementLogic}}, \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceApplicationManager}}
      \item[Required by:] \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceDeviceDataScheduler}}
      \item[Operations:] ~
    \begin{itemize}[noitemsep,nolistsep,leftmargin=-.25cm]
      \item \textsf{List\textless{}int\textgreater{} getApplicationsForDevice(\ref{data:DataTypesPluggableDeviceID} pID)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Returns a list of application instances that can use the device with id "pID". \\
\item Created for: UC11: the system looks up the list of applications that use the pluggable device
        \end{itemize}
      \item \textsf{void rcvData(\ref{data:DataTypesPluggableDeviceID} pID, \ref{data:DataTypesDeviceData} data)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Sends pluggable device data to an application that wants to use it \\
\item Created for: UC11: system relays data to applications
        \end{itemize}
    \end{itemize}
    \end{description}

  %%%%%%%% FrontEndAppRequests
  \subsection{FrontEndAppRequests}\label{int:OnlineServiceOnlineServiceApplicationManagerApplicationManagementLogicFrontEndAppRequests}
    \begin{description}[noitemsep,nolistsep]
      \item[Provided by:] \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceApplicationManagerApplicationManagementLogic}}, \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceApplicationManager}}
      \item[Required by:] \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceCustomerOrganisationFacade}}, \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceInfrastructureOwnerFacade}}, \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceSubscriptionManager}}
      \item[Operations:] ~
    \begin{itemize}[noitemsep,nolistsep,leftmargin=-.25cm]
      \item \textsf{void activateApplication(int applicationInstanceID)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Checks and activates an ApplicationInstance (UC17).
\item Created for: UC19.14, U2 - easy applications
        \end{itemize}
      \item \textsf{void checkApplicationsForActivationForCustomerOrganisations(List\textless{}int\textgreater{} custOrgIDs)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Checks and activates 'inactive' ApplicationInstances which can now execute again for a list of customer organisations.
\item Created for: UC9.7
        \end{itemize}
      \item \textsf{void checkApplicationsForDeactivationForCustomerOrganisations(List\textless{}int\textgreater{} custOrgIDs)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Checks for ApplicationInstances that require deactivation for a list of customer organisations.
\item Created for: UC9.7
        \end{itemize}
      \item \textsf{int createNewApplicationInstance(int custOrgID, int applicationID)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Creates a new ApplicationInstance for an application for a customer organisation and returns its id.
\item Created for: UC19.4, U2 - easy applications
        \end{itemize}
      \item \textsf{List\textless{}\ref{data:DataTypesApplication}\textgreater{} getApplications()}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Returns a list of applications in the system.
\item Created for: UC19.2, U2 - easy applications
        \end{itemize}
      \item \textsf{List\textless{}\ref{data:DataTypesRoomTopology}\textgreater{} getNecessaryDevicesAndTopologyConfigurations(int applicationID)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Returns a list of RoomTopology which is a minimal requirement for a certain application to run. This can used to display the requirements to a user or to check if requirements are fulfilled.
\item Created for: UC19.5, U2 - easy applications
        \end{itemize}
      \item \textsf{void updateApplicationDevicesSettings(int applicationInstanceID, List\textless{}\ref{data:DataTypesPluggableDeviceID}\textgreater{} devices, List\textless{}\ref{data:DataTypesRelationship}\textgreater{} relationships)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Updates an ApplicationInstance's device settings. This includes which devices the instance can use and which relationships exist between those devices.
\item Created for: UC19.6, U2 - easy applications
        \end{itemize}
      \item \textsf{void updateCriticality(int applicationInstanceID, boolean isCritical)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Updates the criticality of an ApplicationInstance.
\item Created for: UC19.11, U2 - easy applications
        \end{itemize}
    \end{itemize}
    \end{description}

  %%%%%%%% GatewayUpdates
  \subsection{GatewayUpdates}\label{int:OnlineServiceOnlineServiceGatewayBrokerGatewayMonitorGatewayUpdates}
    \begin{description}[noitemsep,nolistsep]
      \item[Provided by:] \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceGatewayBrokerGatewayMonitor}}
      \item[Required by:] \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceGatewayBrokerGWBrokerLogic}}
      \item[Operations:] ~
    \begin{itemize}[noitemsep,nolistsep,leftmargin=-.25cm]
      \item \textsf{void gatewayUpdate(int gatewayID, \ref{data:DataTypesDateTime} time)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Lets the \vpett{\nameref{comp:OnlineServiceOnlineServiceGatewayBrokerGatewayMonitor}} know that data has been received from a certain \vpett{\nameref{comp:GatewayGateway}}. Is called after a synchronisation of the gateway. When 3 consecutive expected synchronisations that do not arrive within 1 minute of their expected arrival time, a gateway outage is detected by the monitor.
\item Created for: Av1 - The Online Service is able to detect that a SIoTIP gateway is not sending data anymore based on the expected synchronisation interval.
        \end{itemize}
    \end{itemize}
    \end{description}

  %%%%%%%% GWAppInstanceMgmt
  \subsection{GWAppInstanceMgmt}\label{int:OnlineServiceOnlineServiceApplicationManagerApplicationManagementLogicGWAppInstanceMgmt}
    \begin{description}[noitemsep,nolistsep]
      \item[Provided by:] \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceApplicationManagerApplicationManagementLogic}}, \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceApplicationManager}}, \iconcomponent{}~\vpett{\nameref{comp:GatewayGatewayOnlineServiceBrokerOSBrokerLogic}}, \iconcomponent{}~\vpett{\nameref{comp:GatewayGatewayOnlineServiceBroker}}
      \item[Required by:] \iconcomponent{}~\vpett{\nameref{comp:GatewayGatewayDeviceManager}}, \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceGatewayBrokerGWBrokerLogic}}, \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceGatewayBroker}}
      \item[Operations:] ~
    \begin{itemize}[noitemsep,nolistsep,leftmargin=-.25cm]
      \item \textsf{void activateApplicationInstance(int applicationInstanceID)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Activates a new instance of an application.
\item Created for: UC18, Av3: automatic suspension/reactivation of applications.
        \end{itemize}
      \item \textsf{void checkApplicationsForActivationForInfrastructureOwner(int infrastructureOwnerID)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Checks and activates applications which can now execute again. The applications checked are those that are subscribed to by customers organisations associated to the given infrastructure owner.
\item Created for: UC17, UC6.3 - reintroduced device
        \end{itemize}
      \item \textsf{void deactivateApplicationInstance(int applicationInstanceID)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Deactivates a running instance of an application.
\item Created for: UC18, Av3: automatic suspension/reactivation of applications.
        \end{itemize}
    \end{itemize}
    \end{description}

  %%%%%%%% GWBrokerMonitoring
  \subsection{GWBrokerMonitoring}\label{int:GWBrokerMonitoring}
    \begin{description}[noitemsep,nolistsep]
      \item[Provided by:] \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceGatewayBroker}}
      \item[Required by:] \iconcomponent{}~\vpett{\nameref{comp:GatewayBrokerMonitor}}
      \item[Operations:] ~
    \begin{itemize}[noitemsep,nolistsep,leftmargin=-.25cm]
      \item \textsf{\ref{data:DataTypesEcho} ping()}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Sends a ping request to a component. The component should respond with an Echo reply. The monitor uses this to check whether or not the component is still available.
\item Created for: Av1 - The Online Service is able to autonomously detect failures of its individual internal communication components.
        \end{itemize}
    \end{itemize}
    \end{description}

  %%%%%%%% GWCommunication
  \subsection{GWCommunication}\label{int:OnlineServiceOnlineServiceGatewayBrokerGWBrokerLogicGWCommunication}
    \begin{description}[noitemsep,nolistsep]
      \item[Provided by:] \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceGatewayBrokerGWBrokerLogic}}, \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceGatewayBroker}}
      \item[Required by:] \iconcomponent{}~\vpett{\nameref{comp:GatewayGateway}}, \iconcomponent{}~\vpett{\nameref{comp:GatewayGatewayOnlineServiceBrokerOSBrokerLogic}}, \iconcomponent{}~\vpett{\nameref{comp:GatewayGatewayOnlineServiceBroker}}
      \item[Operations:] ~
    \begin{itemize}[noitemsep,nolistsep,leftmargin=-.25cm]
      \item \textsf{void receive(void ...)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: {\colorbox{red!30}{\underline{Undefined}}}
        \end{itemize}
      \item \textsf{void send(void ...)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: {\colorbox{red!30}{\underline{Undefined}}}
        \end{itemize}
    \end{itemize}
    \end{description}

  %%%%%%%% Heartbeat
  \subsection{Heartbeat}\label{int:GatewayGatewayDeviceManagerHeartbeat}
    \begin{description}[noitemsep,nolistsep]
      \item[Provided by:] \iconcomponent{}~\vpett{\nameref{comp:GatewayGatewayDeviceManager}}, \iconcomponent{}~\vpett{\nameref{comp:GatewayGateway}}
      \item[Required by:] \iconcomponent{}~\vpett{\nameref{comp:MoteMote}}
      \item[Operations:] ~
    \begin{itemize}[noitemsep,nolistsep,leftmargin=-.25cm]
      \item \textsf{void heartbeat(Map\textless{}string, string\textgreater{} moteInfo, List\textless{}Tuple\textless{}\ref{data:DataTypesPluggableDeviceID}, \ref{data:DataTypesPluggableDeviceType}\textgreater{}\textgreater{} pds)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Sends a heartbeat from a mote to a gateway, including a list of the pluggable devices and their device types (i.e. those currently plugged into the mote)
\item Created for: Given constraint, UC14, Av3: failure detection
        \end{itemize}
    \end{itemize}
    \end{description}

  %%%%%%%% InvoiceMgmt
  \subsection{InvoiceMgmt}\label{int:OnlineServiceOnlineServiceInvoiceManagerInvoiceMgmt}
    \begin{description}[noitemsep,nolistsep]
      \item[Provided by:] \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceInvoiceManager}}
      \item[Required by:] \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceApplicationManagerApplicationManagementLogic}}, \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceApplicationManager}}
      \item[Operations:] ~
    \begin{itemize}[noitemsep,nolistsep,leftmargin=-.25cm]
      \item \textsf{void markActivatedApplication(int applicationInstanceID, int custOrgID, \ref{data:DataTypesDateTime} date)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Updates an ApplicationInstance's billing information: marks the start of a billing period.
\item Created for: UC17.4, U2 - easy applications
        \end{itemize}
    \end{itemize}
    \end{description}

  %%%%%%%% IOMgmt
  \subsection{IOMgmt}\label{int:OnlineServiceOnlineServiceInfrastructureOwnerManagerIOMgmt}
    \begin{description}[noitemsep,nolistsep]
      \item[Provided by:] \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceInfrastructureOwnerManager}}
      \item[Required by:] \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceInfrastructureOwnerFacade}}
      \item[Operations:] ~
    \begin{itemize}[noitemsep,nolistsep,leftmargin=-.25cm]
      \item \textsf{List\textless{}int\textgreater{} getCustomerOrganisations(int infrastructureOwnerID)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Returns a list of IDs of all customer organisations associated with an infrastructure owner.
\item Created for: UC9.4
        \end{itemize}
      \item \textsf{List\textless{}\ref{data:DataTypesPluggableDeviceInfo}\textgreater{} getDevices(int infrastructureOwnerID)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Returns a list of PluggableDeviceInfo of devices owned by an infrastructure owner.
\item Created for: UC9.2
        \end{itemize}
    \end{itemize}
    \end{description}

  %%%%%%%% Monitoring
  \subsection{Monitoring}\label{int:OnlineServiceOnlineServiceApplicationManagerApplicationExecutionSubsystemMonitorMonitoring}
    \begin{description}[noitemsep,nolistsep]
      \item[Provided by:] \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceApplicationManagerApplicationContainerManager}}, \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceApplicationManagerApplicationContainerMonitor}}
      \item[Required by:] \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceApplicationManagerApplicationExecutionSubsystemMonitor}}
      \item[Operations:] ~
    \begin{itemize}[noitemsep,nolistsep,leftmargin=-.25cm]
      \item \textsf{\ref{data:DataTypesEcho} ping()}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Sends a ping request to a component. The component should respond with an Echo reply. The monitor uses this to check whether or not the component is still available.
\item Created for: The system is able to autonomously detect failures of its individual application execution components
        \end{itemize}
    \end{itemize}
    \end{description}

  %%%%%%%% NotificationDeliveryMgmt
  \subsection{NotificationDeliveryMgmt}\label{int:NotificationDeliveryServiceNodeNotificationDeliveryServiceNotificationDeliveryMgmt}
    \begin{description}[noitemsep,nolistsep]
      \item[Provided by:] \iconcomponent{}~\vpett{\nameref{comp:NotificationDeliveryServiceNodeNotificationDeliveryService}}
      \item[Required by:] \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceNotificationHandler}}
      \item[Operations:] ~
    \begin{itemize}[noitemsep,nolistsep,leftmargin=-.25cm]
      \item \textsf{void notify(Map\textless{}string, string\textgreater{} data)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Delivers a notification to an end user using a specific delivery service.
\item Created for: UC15
        \end{itemize}
    \end{itemize}
    \end{description}

  %%%%%%%% Notify
  \subsection{Notify}\label{int:OnlineServiceOnlineServiceNotificationHandlerNotify}
    \begin{description}[noitemsep,nolistsep]
      \item[Provided by:] \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceGatewayBrokerGWBrokerLogic}}, \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceNotificationHandler}}, \iconcomponent{}~\vpett{\nameref{comp:GatewayGatewayOnlineServiceBrokerOSBrokerLogic}}, \iconcomponent{}~\vpett{\nameref{comp:GatewayGatewayOnlineServiceBroker}}
      \item[Required by:] \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceApplicationManagerApplicationContainerManager}}, \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceApplicationManagerApplicationContainerMonitor}}, \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceApplicationManagerApplicationExecutionSubsystemMonitor}}, \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceApplicationManagerApplicationManagementLogic}}, \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceApplicationManager}}, \iconcomponent{}~\vpett{\nameref{comp:GatewayGatewayDeviceManager}}, \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceGatewayBrokerGWBrokerLogic}}, \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceGatewayBroker}}, \iconcomponent{}~\vpett{\nameref{comp:GatewayBrokerMonitor}}, \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceGatewayBrokerGatewayMonitor}}
      \item[Operations:] ~
    \begin{itemize}[noitemsep,nolistsep,leftmargin=-.25cm]
      \item \textsf{void notify(int userID, string message)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Stores a new notification in the system and causes it to be sent to a user.
\item Created for: UC14, Av3: notifications
        \end{itemize}
      \item \textsf{void notifySystemAdministrator(string message)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Stores a new notification in the system and causes it to be sent to a SIoTIP system administrator.
        \end{itemize}
    \end{itemize}
    \end{description}

  %%%%%%%% OSBrokerMonitoring
  \subsection{OSBrokerMonitoring}\label{int:GatewayGatewayOnlineServiceBrokerMonitorOSBrokerMonitoring}
    \begin{description}[noitemsep,nolistsep]
      \item[Provided by:] \iconcomponent{}~\vpett{\nameref{comp:GatewayGatewayOnlineServiceBroker}}
      \item[Required by:] \iconcomponent{}~\vpett{\nameref{comp:GatewayGatewayOnlineServiceBrokerMonitor}}
      \item[Operations:] ~
    \begin{itemize}[noitemsep,nolistsep,leftmargin=-.25cm]
      \item \textsf{\ref{data:DataTypesEcho} ping()}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Sends a ping request to a component. The component should respond with an Echo reply. The monitor uses this to check whether or not the component is still available.
\item Created for: Av1 - The SIoTIP gateway is able to autonomously detect failures of its individual internal communication components.
        \end{itemize}
      \item \textsf{void restart()}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Restarts the Gateways' communication component.
\item Created for: Av1 - If an internal SIoTIP gateway component fails, the gateway first tries to restart the affected component.
        \end{itemize}
    \end{itemize}
    \end{description}

  %%%%%%%% OSCommunication
  \subsection{OSCommunication}\label{int:GatewayGatewayOnlineServiceBrokerOSBrokerLogicOSCommunication}
    \begin{description}[noitemsep,nolistsep]
      \item[Provided by:] \iconcomponent{}~\vpett{\nameref{comp:GatewayGateway}}, \iconcomponent{}~\vpett{\nameref{comp:GatewayGatewayOnlineServiceBrokerOSBrokerLogic}}, \iconcomponent{}~\vpett{\nameref{comp:GatewayGatewayOnlineServiceBroker}}
      \item[Required by:] \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceGatewayBrokerGWBrokerLogic}}, \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceGatewayBroker}}
      \item[Operations:] ~
    \begin{itemize}[noitemsep,nolistsep,leftmargin=-.25cm]
      \item \textsf{void acknowledgement(int requestID)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Sends an acknowledgement for a request sent by the SIoTIP gateway.
\item Created for: Av1 - The Online Service should acknowledge each message sent by the SIoTIP gateway so that the gateway can detect failures.
        \end{itemize}
      \item \textsf{void receive(void ...)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: {\colorbox{red!30}{\underline{Undefined}}}
        \end{itemize}
      \item \textsf{void send(void ...)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: {\colorbox{red!30}{\underline{Undefined}}}
        \end{itemize}
    \end{itemize}
    \end{description}

  %%%%%%%% OSMonitoring
  \subsection{OSMonitoring}\label{int:GatewayGatewayOnlineServiceBrokerOSBrokerLogicOSMonitoring}
    \begin{description}[noitemsep,nolistsep]
      \item[Provided by:] \iconcomponent{}~\vpett{\nameref{comp:GatewayGatewayOnlineServiceBrokerOSBrokerLogic}}
      \item[Required by:] \iconcomponent{}~\vpett{\nameref{comp:GatewayGatewayOnlineServiceBrokerOnlineServiceMonitor}}
      \item[Operations:] ~
    \begin{itemize}[noitemsep,nolistsep,leftmargin=-.25cm]
      \item \textsf{\ref{data:DataTypesEcho} pingOnlineService()}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Makes the BrokerLogic send a ping to the Online Service. The Online Service should respond with an Echo reply. The monitor uses this to check whether or not the component is still available.
\item Created for: The SIoTIP gateway will start synchronising with the Online service within 1 minute after the communication channel becomes available.
        \end{itemize}
      \item \textsf{void synchroniseWithOnlineService()}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Makes the BrokerLogic fetch all pluggable data and application commands as new requests to start sending to the Online Service again.
\item Created for: Av1 - The SIoTIP gateway will start synchronising with the Online service within 1 minute after the communication channel becomes available.
        \end{itemize}
    \end{itemize}
    \end{description}

  %%%%%%%% OSUpdates
  \subsection{OSUpdates}\label{int:GatewayGatewayOnlineServiceBrokerOnlineServiceMonitorOSUpdates}
    \begin{description}[noitemsep,nolistsep]
      \item[Provided by:] \iconcomponent{}~\vpett{\nameref{comp:GatewayGatewayOnlineServiceBrokerOnlineServiceMonitor}}
      \item[Required by:] \iconcomponent{}~\vpett{\nameref{comp:GatewayGatewayOnlineServiceBrokerOSBrokerLogic}}
      \item[Operations:] ~
    \begin{itemize}[noitemsep,nolistsep,leftmargin=-.25cm]
      \item \textsf{void onlineServiceUpdate()}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Lets the \vpett{\nameref{comp:GatewayGatewayOnlineServiceBrokerOnlineServiceMonitor}} know that a message has been received from the Online Service
\item Created for: Av1 - The Online Service should acknowledge each message sent by the SIoTIP gateway so that the gateway can detect failures.
        \end{itemize}
    \end{itemize}
    \end{description}

  %%%%%%%% RequestData
  \subsection{RequestData}\label{int:PuggableDevicePluggableDeviceRequestData}
    \begin{description}[noitemsep,nolistsep]
      \item[Provided by:] \iconcomponent{}~\vpett{\nameref{comp:PuggableDevicePluggableDevice}}
      \item[Required by:] \iconcomponent{}~\vpett{\nameref{comp:MoteMote}}
      \item[Operations:] ~
    \begin{itemize}[noitemsep,nolistsep,leftmargin=-.25cm]
      \item \textsf{\ref{data:DataTypesDeviceData} getData()}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Synchronously retrieve the device data of a device. \\
        \end{itemize}
      \item \textsf{void getDataAsync(int requestID)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Asynchronously retrieve the device data of a device (by calling rcvDataCallback).
        \end{itemize}
    \end{itemize}
    \end{description}

  %%%%%%%% RequestData
  \subsection{RequestData}\label{int:MoteMoteRequestData}
    \begin{description}[noitemsep,nolistsep]
      \item[Provided by:] \iconcomponent{}~\vpett{\nameref{comp:MoteMote}}
      \item[Required by:] \iconcomponent{}~\vpett{\nameref{comp:GatewayGatewayDeviceManager}}, \iconcomponent{}~\vpett{\nameref{comp:GatewayGateway}}
      \item[Operations:] ~
    \begin{itemize}[noitemsep,nolistsep,leftmargin=-.25cm]
      \item \textsf{\ref{data:DataTypesDeviceData} getData(\ref{data:DataTypesPluggableDeviceID} pID)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Synchronously retrieve the device data of a pluggable device.
        \end{itemize}
      \item \textsf{void getDataAsync(\ref{data:DataTypesPluggableDeviceID} pID, int requestID)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Asynchronously retrieve the device data of a pluggable device (by calling rcvDataCallback).
        \end{itemize}
    \end{itemize}
    \end{description}

  %%%%%%%% RequestData
  \subsection{RequestData}\label{int:OnlineServiceOnlineServiceDeviceDataSchedulerRequestData}
    \begin{description}[noitemsep,nolistsep]
      \item[Provided by:] \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceDeviceDataScheduler}}
      \item[Required by:] \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceApplicationManagerApplicationManagementLogic}}, \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceApplicationManager}}
      \item[Operations:] ~
    \begin{itemize}[noitemsep,nolistsep,leftmargin=-.25cm]
      \item \textsf{List\textless{}\ref{data:DataTypesDeviceData}\textgreater{} getData(\ref{data:DataTypesPluggableDeviceID} pID, \ref{data:DataTypesDateTime} from, \ref{data:DataTypesDateTime} to)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Requests data from a specific device in a certain time period.
\item Created for: P2: requests from applications
        \end{itemize}
      \item \textsf{Map\textless{}\ref{data:DataTypesPluggableDeviceID}, List\textless{}\ref{data:DataTypesDeviceData}\textgreater{}\textgreater{} getDataForDevices(List\textless{}\ref{data:DataTypesPluggableDeviceID}\textgreater{} devices, \ref{data:DataTypesDateTime} from, \ref{data:DataTypesDateTime} to)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Returns DeviceData of pluggable devices over a specified time period.
\item Created for: UC24.2
        \end{itemize}
    \end{itemize}
    \end{description}

  %%%%%%%% Requests
  \subsection{Requests}\label{int:GatewayGatewayOnlineServiceBrokerRequestStoreRequests}
    \begin{description}[noitemsep,nolistsep]
      \item[Provided by:] \iconcomponent{}~\vpett{\nameref{comp:GatewayGatewayOnlineServiceBrokerRequestStore}}
      \item[Required by:] \iconcomponent{}~\vpett{\nameref{comp:GatewayGatewayOnlineServiceBrokerOSBrokerLogic}}
      \item[Operations:] ~
    \begin{itemize}[noitemsep,nolistsep,leftmargin=-.25cm]
      \item \textsf{void acknowledgement(int requestID)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Sends an acknowledgement for a request sent by the SIoTIP gateway. Deletes a request that is stored in the \vpett{\nameref{comp:GatewayGatewayOnlineServiceBrokerRequestStore}}.
\item Created for: Av1 - the SIoTIP gateway will temporarily store all incoming pluggable data and any issued application commands internally
        \end{itemize}
      \item \textsf{List\textless{}List\textless{}byte\textgreater{}\textgreater{} getNewRequestsForSynchronisation()}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Returns pluggable data and application commands as new requests to start sending to the Online Service again.
\item Created for: Av1 - The SIoTIP gateway will start synchronising with the Online service within 1 minute after the communication channel becomes available.
        \end{itemize}
    \end{itemize}
    \end{description}

  %%%%%%%% RoleMgmt
  \subsection{RoleMgmt}\label{int:OnlineServiceOnlineServiceUserRolesManagerRoleMgmt}
    \begin{description}[noitemsep,nolistsep]
      \item[Provided by:] \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceUserRolesManager}}
      \item[Required by:] \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceApplicationManagerApplicationManagementLogic}}, \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceApplicationManager}}, \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceCustomerOrganisationFacade}}
      \item[Operations:] ~
    \begin{itemize}[noitemsep,nolistsep,leftmargin=-.25cm]
      \item \textsf{boolean areMandatoryUserRolesAssigned(int applicationInstanceID)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Returns true if all mandatory UserRoles for the application have been assigned to users. Finds the relevant customer organisations through the ApplicationInstance.
\item Created for: UC17.1, U2 - easy applications
        \end{itemize}
      \item \textsf{List\textless{}\ref{data:DataTypesUser}\textgreater{} getEndUsers(int custOrgID)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Returns a list of Users which are associated to a customer organisation.
\item Created for: UC19.8, U2 - easy applications
        \end{itemize}
      \item \textsf{List\textless{}\ref{data:DataTypesUserRole}\textgreater{} getMandatoryUserRoles(int applicationID)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Returns a list of UserRoles that which need to be assigned in order for an ApplicationInstance to run.
\item Created for: UC19.7, U2 - easy applications
        \end{itemize}
      \item \textsf{List\textless{}\ref{data:DataTypesUserRole}\textgreater{} getOptionalUserRoles(int applicationID)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Returns a list of UserRoles which can optionally be assigned for an ApplicationInstance.
\item Created for: UC19.7, U2 - easy applications
        \end{itemize}
      \item \textsf{List\textless{}\ref{data:DataTypesUser}\textgreater{} getUsersWithRoles(int applicationInstanceID)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Returns a list of Users associated to an ApplicationInstance that were assigned UserRoles.
\item Created for: UC17.6, U2 - easy applications
        \end{itemize}
      \item \textsf{void updateUserRoles(int applicationInstanceID, Map\textless{}int, int\textgreater{} usersAndRoles)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Updates the UserRoles assigned to Users for a certain ApplicationInstance. 'usersAndRoles' maps User IDs to UserRole IDs.
\item Created for: UC19.9, U2 - easy applications
        \end{itemize}
    \end{itemize}
    \end{description}

  %%%%%%%% SubscriptionMgmt
  \subsection{SubscriptionMgmt}\label{int:OnlineServiceOnlineServiceCustomerOrganisationFacadeSubscriptionMgmt}
    \begin{description}[noitemsep,nolistsep]
      \item[Provided by:] \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceCustomerOrganisationFacade}}
      \item[Required by:] \iconcomponent{}~\vpett{\nameref{comp:CustomerOgranisationClient}}
      \item[Operations:] ~
    \begin{itemize}[noitemsep,nolistsep,leftmargin=-.25cm]
      \item \textsf{Map\textless{}\ref{data:DataTypesApplication}, \ref{data:DataTypesSubscription}\textgreater{} getApplicationsToSubscribe(int custOrgID)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Returns a map of Applications and Subscriptions a given customer organisation has to those applications
\item Created for: UC19.1, U2 - easy applications
        \end{itemize}
      \item \textsf{int subscribeToApplication(int custOrgID, int applicationID)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Creates a new ApplicationInstance for an application for a customer organisation and returns its id.
\item Created for: UC19.4, U2 - easy applications
        \end{itemize}
      \item \textsf{void updateApplicationDevicesSettings(int applicationInstanceID, List\textless{}\ref{data:DataTypesPluggableDeviceID}\textgreater{} devices, List\textless{}\ref{data:DataTypesRelationship}\textgreater{} relationships)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Updates an ApplicationInstance's device settings. This includes which devices the instance can use and which relationships exist between those devices.
\item Created for: UC19.6, U2 - easy applications
        \end{itemize}
      \item \textsf{void updateCriticality(int applicationInstanceID, boolean isCritical)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Updates the criticality of an ApplicationInstance.
\item Created for: UC19.11, U2 - easy applications
        \end{itemize}
      \item \textsf{void updateUserRoles(int applicationInstanceID, Map\textless{}int, int\textgreater{} usersAndRoles)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Updates the UserRoles assigned to Users for a certain ApplicationInstance. 'usersAndRoles' maps User IDs to UserRole IDs.
\item Created for: UC19.9, U2 - easy applications
        \end{itemize}
    \end{itemize}
    \end{description}

  %%%%%%%% SubscriptionMgmt
  \subsection{SubscriptionMgmt}\label{int:OnlineServiceOnlineServiceSubscriptionManagerSubscriptionMgmt}
    \begin{description}[noitemsep,nolistsep]
      \item[Provided by:] \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceSubscriptionManager}}
      \item[Required by:] \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceCustomerOrganisationFacade}}
      \item[Operations:] ~
    \begin{itemize}[noitemsep,nolistsep,leftmargin=-.25cm]
      \item \textsf{void createSubscription(int custOrgID, int applicationInstanceID)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Creates a subscription for a customer organisation to an ApplicationInstance. If the customer organisation is already subscribed to an older version of the the application, then the organisation is unsubscribed from that earlier version.
\item Created for: UC19.12-13, U2 - easy applications
        \end{itemize}
      \item \textsf{Map\textless{}\ref{data:DataTypesApplication}, \ref{data:DataTypesSubscription}\textgreater{} getApplicationsToSubscribe(int custOrgID)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Returns a map of Applications and Subscriptions a given customer organisation has to those applications
\item Created for: UC19.2, U2 - easy applications
        \end{itemize}
    \end{itemize}
    \end{description}

  %%%%%%%% TopologyMgmt
  \subsection{TopologyMgmt}\label{int:OnlineServiceOnlineServiceTopologyManagerTopologyMgmt}
    \begin{description}[noitemsep,nolistsep]
      \item[Provided by:] \iconcomponent{}~\vpett{\nameref{comp:GatewayGatewayOnlineServiceBrokerOSBrokerLogic}}, \iconcomponent{}~\vpett{\nameref{comp:GatewayGatewayOnlineServiceBroker}}, \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceTopologyManager}}
      \item[Required by:] \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceApplicationManagerApplicationManagementLogic}}, \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceApplicationManager}}, \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceCustomerOrganisationFacade}}, \iconcomponent{}~\vpett{\nameref{comp:GatewayGatewayDeviceManager}}, \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceGatewayBrokerGWBrokerLogic}}, \iconcomponent{}~\vpett{\nameref{comp:OnlineServiceOnlineServiceGatewayBroker}}
      \item[Operations:] ~
    \begin{itemize}[noitemsep,nolistsep,leftmargin=-.25cm]
      \item \textsf{void addDevice(\ref{data:DataTypesPluggableDeviceID} id, int moteID)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Adds a new pluggable device to the topology of the infrastructure owner and links it to a mote. The device gets the mote's location by default. If the device is already linked to another mote, overwrites that link.
\item Created for: UC6.3, U2 - easy pluggable device installation
        \end{itemize}
      \item \textsf{void addMote(int moteID, int gatewayID, int infrastructureOwnerID)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Adds a new mote to a topology of an infrastructure owner. The mote is linked to a gateway and gets status 'unplaced' by default.
\item Created for: UC4.3, U2 - easy mote installation
        \end{itemize}
      \item \textsf{boolean arePluggableDevicesPlaced(List\textless{}\ref{data:DataTypesPluggableDeviceID}\textgreater{} devices)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Returns true if all pluggable devices in the given list have status 'placed' in the topology.
\item Created for: UC17.2, U2 - easy applications
        \end{itemize}
      \item \textsf{List\textless{}\ref{data:DataTypesRoomTopology}\textgreater{} getTopology(int custOrgID)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Returns a list of RoomTopology associated to a customer organisation.
\item Created for: UC19.5, U2 - easy applications
        \end{itemize}
      \item \textsf{void reactivateDevice(\ref{data:DataTypesPluggableDeviceID} id)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Changes the status of a pluggable device in the topology to 'placed'.
\item Created for: UC6.3 - reintroduced device
        \end{itemize}
      \item \textsf{void reactivateMote(int moteID)}
        \begin{itemize}[noitemsep,nolistsep]
           \item Effect: Changes the status of the mote in the topology to 'placed'. The location of the mote is unchanged, it has already been set.
\item Created for: U2 - Reintroducing a previously known mote should not require any conguration.
        \end{itemize}
    \end{itemize}
    \end{description}

% END INTERFACES

% EXCEPTIONS
\section{Exceptions}\label{sec:exceptions}
\begin{itemize}[nolistsep,noitemsep]
\item \vpeexception{ex:DataTypesAppMessageNotAllowedException}{AppMessageNotAllowedException}
Thrown if one part of an application is not allowed to send a certain message or command to another part of the application. Contains the reason why the message is not allowed.
\item \vpeexception{ex:DataTypesUnknownCommandException}{UnknownCommandException}
Thrown if a command is sent by an application that is not recognised.
\item \vpeexception{ex:DataTypesUnknownConfigurationParameterException}{UnknownConfigurationParameterException}
Thrown if an application tries to set a configuration parameter on a device that is not recognised.
\end{itemize}
% END EXCEPTIONS

% DATA TYPES
\section{Data types}\label{sec:datatypes}
\begin{itemize}[nolistsep,noitemsep]
\item \vpedatatype{data:DataTypesApplication}{Application}: 
\begin{itemize}[noitemsep,nolistsep]

\item[] Contains information about an application uploaded to the SIoTIP system.
\end{itemize}
\item \vpedatatype{data:DataTypesApplicationInstance}{ApplicationInstance}: 
\begin{itemize}[noitemsep,nolistsep]
\item[] Attributes: int id, int status, int customerOrganisationID, boolean isGatewayVersion
\item[] Contains information on an application instance.
When an ApplicationInstance is running on the Online Service and on a Gateway, the ApplicationIntances in the ApplicationContainers share the same id.
\end{itemize}
\item \vpedatatype{data:DataTypesDateTime}{DateTime}: 
\begin{itemize}[noitemsep,nolistsep]

\item[] Represents an instant in time, expressed as a date and time of day.
\end{itemize}
\item \vpedatatype{data:DataTypesDeviceData}{DeviceData}: 
\begin{itemize}[noitemsep,nolistsep]

\item[] Data from a pluggable device. For sensors, this contains sensor values. For actuators, this contains the state of the actuator. The data is encapsulated within a JSON message, and should be converted into something meaningful based on the device type of the pluggable device that sent the data.
\end{itemize}
\item \vpedatatype{data:DataTypesEcho}{Echo}: 
\begin{itemize}[noitemsep,nolistsep]

\item[] Is a reply to an echo request (ping). Contains an Identifier and Sequence Number that matches the request that caused the Echo reply.
\end{itemize}
\item \vpedatatype{data:DataTypesGatewayInfo}{GatewayInfo}: 
\begin{itemize}[noitemsep,nolistsep]
\item[] Attributes: int gatewayID, \ref{data:DataTypesIPAddress} IPAddress, int infrastructureOwnerID
\item[] An object containing information on a Gateway.
\end{itemize}
\item \vpedatatype{data:DataTypesIPAddress}{IPAddress}: 
\begin{itemize}[noitemsep,nolistsep]

\item[] Represents an Internet Protocol address.
\end{itemize}
\item \vpedatatype{data:DataTypesMoteInfo}{MoteInfo}: 
\begin{itemize}[noitemsep,nolistsep]
\item[] Attributes: int moteID, int manufacturerID, int productID, int batteryLevel
\item[] An object containing information on a Mote. This is a list of key-value pairs. The values depend on the type of mote. For example, only a battery-powered mote would include the batterylevel info.
\end{itemize}
\item \vpedatatype{data:DataTypesNotification}{Notification}: 
\begin{itemize}[noitemsep,nolistsep]
\item[] Attributes: int id, int recipientUserID, string message, int communicationChannelID, int notificationTypeID
\item[] Contains information about a notification. The communicationChannellD represents the communication channel that will be used to send the notification to the user. The notificationTypeID denotes the type of the notification (normal / alarm / ...).
\end{itemize}
\item \vpedatatype{data:DataTypesPluggableDeviceID}{PluggableDeviceID}: 
\begin{itemize}[noitemsep,nolistsep]

\item[] A unique identifier of a pluggable device.
\end{itemize}
\item \vpedatatype{data:DataTypesPluggableDeviceInfo}{PluggableDeviceInfo}: 
\begin{itemize}[noitemsep,nolistsep]
\item[] Attributes: \ref{data:DataTypesPluggableDeviceID} id, \ref{data:DataTypesPluggableDeviceType} type, Map\textless{}string, string\textgreater{} config
\item[] Contains information on a pluggable device.
\end{itemize}
\item \vpedatatype{data:DataTypesPluggableDeviceType}{PluggableDeviceType}: 
\begin{itemize}[noitemsep,nolistsep]
\item[] Attributes: int manufacturerID, int productID, int type, int measurementUnits
\item[] Denotes the type of a pluggable device. It specifies the manufacturer, a model identifier (if any) of the pluggable (e.g. heat-o sensor 5000), the type of pluggable device (e.g. temperature sensor or power socket actuator) and the used measurement units (e.g. degrees Celsius, degrees Fahrenheit or decibel). Within MicroPnP this information is also used to retrieve and install the correct drivers (this is outside the scope of the system), \\
This description is taken from the Discussion Board on Toledo.
\end{itemize}
\item \vpedatatype{data:DataTypesRelationship}{Relationship}: 
\begin{itemize}[noitemsep,nolistsep]
\item[] Attributes: \ref{data:DataTypesPluggableDeviceID} pID1, \ref{data:DataTypesPluggableDeviceID} pID2, string relationship
\item[] Represents a relationship between two devices. e.g. device2 can be used for the purpose that device1 fulfills, device2 is preferred over device1 for a responsibility, etc.
\end{itemize}
\item \vpedatatype{data:DataTypesRoomTopology}{RoomTopology}: 
\begin{itemize}[noitemsep,nolistsep]
\item[] Attributes: int roomID, List\textless{}\ref{data:DataTypesPluggableDeviceID}\textgreater{} devices, \ref{data:DataTypesRelationship} relationships, int buildingID
\item[] Represents a room in a topology. Contains the room's devices and the relationships between those devices.
\end{itemize}
\item \vpedatatype{data:DataTypesSubscription}{Subscription}: 
\begin{itemize}[noitemsep,nolistsep]
\item[] Attributes: int id, int status, int customerOrganisationID, int applicationInstanceID
\item[] Contains data about a subscription by a customer organisation for an application instance. Data about period/length of the subscription is stored in invoices.
\end{itemize}
\item \vpedatatype{data:DataTypesUser}{User}: 
\begin{itemize}[noitemsep,nolistsep]

\item[] Represents a user in the SIoTIP system.
\end{itemize}
\item \vpedatatype{data:DataTypesUserRole}{UserRole}: 
\begin{itemize}[noitemsep,nolistsep]
\item[] Attributes: int userID, int roleID, int applicationInstanceID, int customerOrganisationID
\item[] Contains information on the role that a User fulfills for a certain ApplicationInstance.
\end{itemize}
\end{itemize}
% END TYPES

%\end{document}