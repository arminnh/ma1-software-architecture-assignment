\section{Use case overview}\label{sec:uc_overview}

\paragraph{UCXXX: send data to gateway}
A mote sends data to a gateway.
\paragraph{UCXXX: upload application}
An appplication developers uploads an application to the Online Service.
\paragraph{UCXXX: get data from sensor}
An application requests to get data from a specific sensor.
\paragraph{UCXXX: search for applications}
A customer organisation representative searches for available applications they
could potentially subscribe to.
\paragraph{UCXXX: review application}
A SIoTIP system administrator reviews and approves or declines it.

\section{Detailed use cases}

\subsection{\emph{UCXXX}: Send sensor data}
\begin{itemize}
    \item \textbf{Name:} Send sensor data
    \item \textbf{Primary actor:} Mote
    \item \textbf{Secondary actors:} Sensor, Gateway
    \item \textbf{Interested parties:}
        \begin{itemize}
            \item \textit{Customer organisation:} pays for an application that uses this sensor.
            \item \textit{Infrastructure owner:} needs the sensor data for an application they set up.
            \item \textit{End-users:} use the sensor data in an application.
        \end{itemize}

    \item \textbf{Preconditions:}
        \begin{itemize}
            \item The mote has received data from a sensor connected to it.
            \item The mote is connected to a gateway.
        \end{itemize}

    \item \textbf{Postconditions:}
        \begin{itemize}
            \item The gateway has received and processed the sensor data.
            \item The Online Service has received the data and can process it.
        \end{itemize}

    \item \textbf{Main scenario:}
        \begin{enumerate}
           \item The mote sends the sensor data to the connected gateway.
           \item The gateway receives the data and if applicable, runs some application logic.
           \item The gateway collects data until a synchronisation point is reached.
                 At that point, the gateway sends the data to the Online Service.
        \end{enumerate}

    \item \textbf{Alternative scenarios:}
        \begin{enumerate}
            \item [3b.] The gateway determined that the data was important
                  (e.g. cause for alarm, notification, etc.) and sent the data
                  to the Online Service immediately instead of waiting for the
                  sycnhronisation point.
        \end{enumerate}

    \item \textbf{Remarks:}
        \begin{itemize}
            \item It is essential that the synchronisation protocol works
                  correctly in the presence of non-reliable network communication
                  so that there is no loss of data.
        \end{itemize}
\end{itemize}

\subsection{\emph{UCXXX}: Upload application}
\begin{itemize}
    \item \textbf{Name:} Upload application
    \item \textbf{Primary actor:} Application Developer
    \item \textbf{Secondary actor(s)}: SIotIP system
    \item \textbf{Interested parties:}
        \begin{itemize}
            \item \textit{Customers organisations:} want to subscribe the applications.
        \end{itemize}

    \item \textbf{Preconditions:}
        \begin{itemize}
            \item The application developer has access to his dashboard.
        \end{itemize}

    \item \textbf{Postconditions:}
        \begin{itemize}
            \item The application is uploaded into the Online Service.
            \item The application is available to customer organisations for subscription.
        \end{itemize}

    \item \textbf{Main scenario:}
    \begin{enumerate}
       \item The application developer logs in and opens his dashboard.
       \item The system provides the ability to upload new application.
       \item The application developer uploads application.
       \item The system check application and  initiates a number of automated tests.
       \item The application developer follows  the  progress  and  results  
             of these tests via application provider dashboard.
       \item The application successfully passes all tests.
       \item The system makes the application available for the customers organisations.
       \item The system send a notification to the application developer.
    \end{enumerate}

    \item \textbf{Alternative scenarios:}
    \begin{enumerate}
        \item [4b.] The system can not load application and send error 
                    to the application developer.
        \item [7b.] The system interrupt loading of the application, 
                    because of potential memory leak.
        \item [8b.] The SIoTIP administrator performs a secondary review and decides whether to accept
                    or reject the application.
    \end{enumerate}

    \item \textbf{Remarks:}
        \begin{itemize}
            \item First remark
        \end{itemize}
\end{itemize}

\subsection{\emph{UCXXX}: Get data from sensor}
\begin{itemize}
    \item \textbf{Name:} Get data from sensor
    \item \textbf{Primary actor:} Application
    \item \textbf{Secondary actor(s)}: Online Service, Gateway, Mote
    \item \textbf{Interested parties:}
        \begin{itemize}
            \item \textit{End-user:} wants to get information from sensors
        \end{itemize}

    \item \textbf{Preconditions:}
        \begin{itemize}
            \item The application is uploaded in Online Service.
            \item A connection between Online Service and Getway is established.
        \end{itemize}

    \item \textbf{Postconditions:}
        \begin{itemize}
            \item The application received data from sensor.
        \end{itemize}

    \item \textbf{Main scenario:}
    \begin{enumerate}
       \item The application send request to Online Service.
       \item The Online service communicate with the Gateway.
       \item The Gateway relay information to the mote by sending request.
       \item The mote send data to Online Service (include:send sensor data (UCXX))
       \item The Online Service send data to the application.
    \end{enumerate}

    \item \textbf{Alternative scenarios:}
    \begin{enumerate}
        \item [3b.] Alternative at step 3
    \end{enumerate}

    \item \textbf{Remarks:}
        \begin{itemize}
            \item First remark
        \end{itemize}
\end{itemize}

\subsection{\emph{UCXXX}: Search for applications}
\begin{itemize}
    \item \textbf{Name:} Search for applications
    \item \textbf{Primary actor:} Customer orgranisation
    \item \textbf{Secondary actor(s)}: secondary actor(s)
    \item \textbf{Interested parties:}
        \begin{itemize}
            \item \textit{Name of interested party:} reason why party is interested
        \end{itemize}

    \item \textbf{Preconditions:}
        \begin{itemize}
            \item The primary actor is authenticated.
            \item Second precondition.
        \end{itemize}

    \item \textbf{Postconditions:}
        \begin{itemize}
            \item First postcondition.
            \item Second postcondition.
        \end{itemize}

    \item \textbf{Main scenario:}
    \begin{enumerate}
       \item Step 1
       \item Step 2
       \item Step 3
       \item \ldots
    \end{enumerate}

    \item \textbf{Alternative scenarios:}
    \begin{enumerate}
        \item [3b.] Alternative at step 3
    \end{enumerate}

    \item \textbf{Remarks:}
        \begin{itemize}
            \item First remark
        \end{itemize}
\end{itemize}

\subsection{\emph{UCXXX}: Review application}
\begin{itemize}
    \item \textbf{Name:} Review application
    \item \textbf{Primary actor:} SIoTIP System Administrator
    \item \textbf{Secondary actor(s)}:
    \item \textbf{Interested parties:}
        \begin{itemize}
            \item \textit{Application developers:} want to add their application to the system
        \end{itemize}

    \item \textbf{Preconditions:}
        \begin{itemize}
            \item The system administrator is authenticated.
            \item The application needs to be reviewed by a system administrator.
        \end{itemize}

    \item \textbf{Postconditions:}
        \begin{itemize}
            \item The system adminstrator accepts or declines the application.
            \item The application developers have been notified of this event.
        \end{itemize}

    \item \textbf{Main scenario:}
        \begin{enumerate}
            \item The system administrator navigates to the applications component on their
                  dashboard and selects the application that needs to be reviewed.
            \item The system administrator reviews the application's functionality and
                  log history, and the message history with the developers.
            \item The system administrator indicates he wants to accept the application.
            \item The system logs this event and makes the application available to
                  customer ogranisations.
            \item The system notifies the application developers.
        \end{enumerate}

    \item \textbf{Alternative scenarios:}
        \begin{enumerate}
            \item [3b.] The system administrator indicates he wants decline to the application
                  and is prompted by the system to fill in the reason for this. The
                  application will thus not become available to customer organisations.
            \item [3c.] The system administrator indicates he wants communicate
                  with the developers before making a decision. Afterwards, return to
                  step 2.
        \end{enumerate}

    \item \textbf{Remarks:}
        \begin{itemize}
            \item When an application first gets uploaded to the system, it needs to be
                  reviewed and accepted by a system administrator. This will prevent
                  the available apps to be flooded with apps of very poor quality
                  or apps that are copies of other apps.
            \item If at some point in the future, automated testing for an app fails,
                  the app will need to be reviewed again before it can be made
                  available again.
        \end{itemize}
\end{itemize}
